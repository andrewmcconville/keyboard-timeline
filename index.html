<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Skeuomorphic Echoes — Timeline</title>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,500;0,600;0,700;0,800;0,900;1,400;1,500;1,600;1,700;1,800;1,900&family=DM+Sans:ital,wght@0,300;0,400;0,500;1,300;1,400&family=JetBrains+Mono:wght@300;400;500&display=swap" rel="stylesheet">
<style>


  /* ============================================
     THEME TOKENS — DARK
     ============================================ */

  [data-theme="dark"] {
    --bg-deep: #0a0a0c;
    --bg-card: #111114;
    --bg-overlay: rgba(10,10,12,0.92);
    --bg-inset: rgba(255,255,255,0.02);
    --bg-toc-hover: rgba(255,255,255,0.03);
    --border-subtle: rgba(255,255,255,0.06);
    --border-rule: rgba(255,255,255,0.08);
    --border-accent: rgba(217,175,120,0.3);
    --text-primary: #e8e4df;
    --text-secondary: #8a857e;
    --text-dim: #5a5650;
    --text-faint: #3a3630;
    --accent-warm: #d9af78;
    --accent-echo: #c47d4a;
    --tag-bg: rgba(217,175,120,0.08);
    --lost-red: #c47a6a;
    --lost-bg: rgba(196,122,106,0.06);
    --lost-border: rgba(196,122,106,0.15);
    --gained-green: #8abf7a;
    --gained-bg: rgba(138,191,122,0.06);
    --gained-border: rgba(138,191,122,0.15);
    --sensory-purple: #b89adb;
    --sensory-teal: #7ab8c4;
    --sensory-gold: #c4a87a;
    --sensory-green: #8abf7a;
    --quote-mark: var(--text-faint);
    --number-color: var(--text-primary);
    --toggle-bg: rgba(255,255,255,0.06);
    --toggle-knob: var(--text-secondary);
    --shadow-card: rgba(0,0,0,0.5);
    --glow-era-1: rgba(107,91,78,0.04);
    --glow-era-2: rgba(122,106,82,0.03);
    --glow-era-3: rgba(196,125,74,0.04);
    --glow-era-4: rgba(217,175,120,0.05);
    --toc-number: rgba(217,175,120,0.12);
    --toc-connector: rgba(255,255,255,0.04);
    --registry-collected-bg: rgba(217,175,120,0.04);
    --registry-locked-bg: rgba(255,255,255,0.015);
  }

  /* ============================================
     THEME TOKENS — LIGHT
     ============================================ */

  [data-theme="light"] {
    --bg-deep: #ece8e1;
    --bg-card: #f5f2ed;
    --bg-overlay: rgba(236,232,225,0.94);
    --bg-inset: rgba(0,0,0,0.025);
    --bg-toc-hover: rgba(0,0,0,0.025);
    --border-subtle: rgba(0,0,0,0.07);
    --border-rule: rgba(0,0,0,0.08);
    --border-accent: rgba(172,120,58,0.3);
    --text-primary: #2a2520;
    --text-secondary: #6b6560;
    --text-dim: #9a948e;
    --text-faint: #c2bdb6;
    --accent-warm: #a86f30;
    --accent-echo: #8a5a28;
    --tag-bg: rgba(168,111,48,0.08);
    --lost-red: #a85545;
    --lost-bg: rgba(168,85,69,0.06);
    --lost-border: rgba(168,85,69,0.18);
    --gained-green: #5a8a4a;
    --gained-bg: rgba(90,138,74,0.06);
    --gained-border: rgba(90,138,74,0.18);
    --sensory-purple: #7a5ea0;
    --sensory-teal: #4a8a96;
    --sensory-gold: #9a7a40;
    --sensory-green: #5a8a4a;
    --quote-mark: rgba(0,0,0,0.08);
    --number-color: var(--text-primary);
    --toggle-bg: rgba(0,0,0,0.06);
    --toggle-knob: var(--text-secondary);
    --shadow-card: rgba(0,0,0,0.08);
    --glow-era-1: rgba(168,111,48,0.03);
    --glow-era-2: rgba(168,111,48,0.02);
    --glow-era-3: rgba(168,111,48,0.03);
    --glow-era-4: rgba(168,111,48,0.04);
    --toc-number: rgba(168,111,48,0.1);
    --toc-connector: rgba(0,0,0,0.03);
    --registry-collected-bg: rgba(168,111,48,0.04);
    --registry-locked-bg: rgba(0,0,0,0.015);
  }

  /* Transitions */
  html.transitioning, html.transitioning *, html.transitioning *::before, html.transitioning *::after {
    transition: background-color 0.45s ease, color 0.45s ease, border-color 0.45s ease, box-shadow 0.45s ease, opacity 0.45s ease !important;
  }

  * { margin:0; padding:0; box-sizing:border-box; }

  body {
    background:var(--bg-deep); color:var(--text-primary); font-family:'DM Sans',sans-serif;
    height:100vh; overflow:hidden; -webkit-font-smoothing:antialiased;
    display:flex; flex-direction:column;
  }

  /* ============================================
     TOP NAV
     ============================================ */

  .top-bar {
    height:56px; border-bottom:1px solid var(--border-subtle);
    display:flex; align-items:center; justify-content:space-between;
    padding:0 36px; flex-shrink:0; background:var(--bg-deep); z-index:100;
  }
  .project-title { font-family:'Playfair Display',serif; font-size:15px; font-weight:400; color:var(--text-primary); }
  .project-title em { color:var(--accent-warm); font-style:italic; }
  .project-subtitle { font-family:'JetBrains Mono',monospace; font-size:8px; text-transform:uppercase; letter-spacing:3px; color:var(--text-dim); margin-left:16px; }
  .nav-right { display:flex; align-items:center; gap:20px; }
  .nav-link { font-family:'JetBrains Mono',monospace; font-size:9px; text-transform:uppercase; letter-spacing:2px; color:var(--text-secondary); text-decoration:none; cursor:pointer; transition:color 0.2s; }
  .nav-link:hover { color:var(--text-primary); }
  .nav-link.muted { color:var(--text-dim); }
  .info-btn { width:28px; height:28px; border-radius:50%; border:1px solid var(--border-subtle); background:transparent; color:var(--text-secondary); font-family:'Playfair Display',serif; font-size:13px; font-style:italic; cursor:pointer; display:flex; align-items:center; justify-content:center; transition:all 0.2s; }
  .info-btn:hover { border-color:var(--accent-warm); color:var(--accent-warm); }

  .theme-toggle { width:44px; height:24px; border-radius:12px; background:var(--toggle-bg); border:1px solid var(--border-subtle); cursor:pointer; position:relative; display:flex; align-items:center; padding:0 3px; transition:background 0.3s,border-color 0.3s; flex-shrink:0; }
  .theme-toggle:hover { border-color:var(--accent-warm); }
  .toggle-knob { width:16px; height:16px; border-radius:50%; background:var(--toggle-knob); transition:transform 0.35s cubic-bezier(0.4,0,0.2,1),background 0.3s; display:flex; align-items:center; justify-content:center; }
  [data-theme="light"] .toggle-knob { transform:translateX(20px); }
  .toggle-icon { width:10px; height:10px; display:flex; align-items:center; justify-content:center; }
  .toggle-icon svg { width:10px; height:10px; }
  [data-theme="dark"] .icon-sun { display:none; }
  [data-theme="light"] .icon-moon { display:none; }

  /* ============================================
     ERA BAR
     ============================================ */

  .era-bar { height:32px; display:flex; flex-shrink:0; border-bottom:1px solid var(--border-subtle); overflow:hidden; }
  .era-bar-scroll { display:flex; min-width:2800px; height:100%; }
  .era-zone { flex:1; display:flex; align-items:center; justify-content:center; font-family:'JetBrains Mono',monospace; font-size:8px; text-transform:uppercase; letter-spacing:3px; color:var(--text-faint); border-right:1px solid var(--border-subtle); transition:color 0.3s; }
  .era-zone:last-child { border-right:none; }
  .era-zone:hover { color:var(--text-secondary); }

  /* ============================================
     TIMELINE
     ============================================ */

  .main { flex:1; display:flex; flex-direction:column; overflow:hidden; position:relative; }
  .timeline-viewport { flex:1; overflow-x:auto; overflow-y:hidden; position:relative; cursor:grab; }
  .timeline-viewport:active { cursor:grabbing; }
  .timeline-viewport::-webkit-scrollbar { height:4px; }
  .timeline-viewport::-webkit-scrollbar-track { background:var(--bg-deep); }
  .timeline-viewport::-webkit-scrollbar-thumb { background:var(--text-faint); border-radius:2px; }
  .timeline-canvas { min-width:2800px; height:100%; position:relative; display:flex; align-items:center; }
  .timeline-canvas::before { content:''; position:absolute; inset:0; background: radial-gradient(ellipse at 12% 50%,var(--glow-era-1) 0%,transparent 40%), radial-gradient(ellipse at 40% 50%,var(--glow-era-2) 0%,transparent 40%), radial-gradient(ellipse at 70% 50%,var(--glow-era-3) 0%,transparent 40%), radial-gradient(ellipse at 92% 45%,var(--glow-era-4) 0%,transparent 35%); pointer-events:none; }
  .timeline-line { position:absolute; top:50%; left:60px; right:60px; height:1px; background:var(--border-rule); }
  .timeline-line::before { content:''; position:absolute; left:-40px; top:0; width:40px; height:1px; background:linear-gradient(to right,transparent,var(--border-rule)); }
  .timeline-line::after { content:''; position:absolute; right:-40px; top:0; width:40px; height:1px; background:linear-gradient(to left,transparent,var(--border-rule)); }
  .era-tick { position:absolute; top:-6px; width:1px; height:13px; background:var(--border-rule); }
  .year-marker { position:absolute; top:calc(50% + 18px); font-family:'JetBrains Mono',monospace; font-size:8px; color:var(--text-faint); letter-spacing:1px; transform:translateX(-50%); }
  .timeline-dot { position:absolute; top:50%; width:8px; height:8px; border-radius:50%; background:var(--text-dim); border:2px solid var(--bg-deep); transform:translate(-50%,-50%); z-index:5; transition:all 0.3s; }
  .timeline-dot.active { background:var(--accent-warm); box-shadow:0 0 14px rgba(217,175,120,0.4); width:10px; height:10px; }
  [data-theme="light"] .timeline-dot.active { box-shadow:0 0 14px rgba(168,111,48,0.3); }
  .stem { position:absolute; width:1px; background:var(--border-rule); z-index:4; }
  .stem.up { bottom:50%; height:60px; }
  .stem.down { top:50%; height:60px; }
  .stem.active { background:var(--border-accent); }

  /* ============================================
     TIMELINE CARDS
     ============================================ */

  .sku-card { position:absolute; width:300px; background:var(--bg-card); border:1px solid var(--border-subtle); border-radius:10px; cursor:pointer; transition:all 0.35s cubic-bezier(0.2,0,0,1); z-index:10; overflow:hidden; }
  .sku-card:hover { border-color:var(--border-rule); box-shadow:0 16px 48px var(--shadow-card); }
  .sku-card.active { border-color:var(--border-accent); }
  .sku-card.active:hover { border-color:var(--accent-warm); }
  .sku-card.above { bottom:calc(50% + 64px); }
  .sku-card.above:hover { transform:translateY(-6px); }
  .sku-card.below { top:calc(50% + 64px); }
  .sku-card.below:hover { transform:translateY(-6px); }
  .sku-inner { padding:22px 24px 20px; }
  .sku-counter { font-family:'JetBrains Mono',monospace; font-size:8px; text-transform:uppercase; letter-spacing:2.5px; color:var(--text-dim); margin-bottom:14px; display:flex; align-items:center; gap:6px; }
  .sku-name-large { font-family:'Playfair Display',serif; font-size:42px; font-weight:700; color:var(--text-primary); line-height:0.95; letter-spacing:-1.5px; margin-bottom:2px; }
  .sku-name-accent-large { font-family:'Playfair Display',serif; font-size:42px; font-weight:700; font-style:italic; color:var(--accent-warm); line-height:0.95; letter-spacing:-1.5px; margin-bottom:16px; }
  .sku-rule { height:1px; background:var(--border-rule); margin-bottom:14px; }
  .sku-tease { font-size:12px; line-height:1.65; color:var(--text-secondary); font-weight:300; margin-bottom:18px; }
  .sku-cta { font-family:'JetBrains Mono',monospace; font-size:8px; text-transform:uppercase; letter-spacing:2.5px; color:var(--accent-warm); display:flex; align-items:center; gap:8px; transition:gap 0.25s; }
  .sku-card:hover .sku-cta { gap:14px; }
  .sku-card.locked { cursor:not-allowed; }
  .sku-card.locked:hover { transform:none; box-shadow:none; border-color:var(--border-subtle); }
  .sku-card.locked .sku-name-large,.sku-card.locked .sku-name-accent-large { opacity:0.3; }
  .sku-card.locked .sku-tease { opacity:0.35; font-style:italic; }
  .locked-badge { font-family:'JetBrains Mono',monospace; font-size:8px; text-transform:uppercase; letter-spacing:2.5px; color:var(--text-dim); border:1px solid var(--border-rule); padding:5px 14px; border-radius:3px; display:inline-block; }
  .lock-icon-small { display:inline-block; width:11px; height:11px; vertical-align:middle; opacity:0.3; }

  .click-hint { position:fixed; bottom:24px; left:50%; transform:translateX(-50%); font-family:'JetBrains Mono',monospace; font-size:8px; text-transform:uppercase; letter-spacing:3px; color:var(--text-faint); z-index:50; display:flex; align-items:center; gap:10px; transition:opacity 0.4s; pointer-events:none; }
  .scroll-arrows { display:flex; gap:3px; font-size:11px; animation:pulse 2.5s ease-in-out infinite; }
  @keyframes pulse { 0%,100%{opacity:0.3;} 50%{opacity:0.8;} }

  /* ============================================
     OVERLAY
     ============================================ */

  .overlay { position:fixed; inset:0; background:var(--bg-overlay); backdrop-filter:blur(16px); -webkit-backdrop-filter:blur(16px); z-index:500; display:none; opacity:0; transition:opacity 0.35s ease; }
  .overlay.visible { display:flex; opacity:1; }
  .overlay-panel { position:absolute; top:0; right:0; width:620px; height:100%; background:var(--bg-card); border-left:1px solid var(--border-subtle); overflow-y:auto; overflow-x:hidden; transform:translateX(60px); opacity:0; transition:all 0.4s cubic-bezier(0.2,0,0,1); }
  .overlay.visible .overlay-panel { transform:translateX(0); opacity:1; }
  .overlay-panel::-webkit-scrollbar { width:3px; }
  .overlay-panel::-webkit-scrollbar-track { background:transparent; }
  .overlay-panel::-webkit-scrollbar-thumb { background:var(--text-faint); border-radius:2px; }

  .overlay-header { padding:20px 36px; border-bottom:1px solid var(--border-rule); display:flex; align-items:center; justify-content:space-between; position:sticky; top:0; background:var(--bg-card); z-index:10; }
  .overlay-title-bar { display:flex; align-items:center; gap:14px; }
  .overlay-sku-label { font-family:'JetBrains Mono',monospace; font-size:8px; text-transform:uppercase; letter-spacing:2.5px; color:var(--text-dim); }
  .overlay-sku-name { font-family:'Playfair Display',serif; font-size:14px; font-weight:400; color:var(--text-secondary); font-style:italic; }
  .close-btn { width:32px; height:32px; border-radius:50%; border:1px solid var(--border-subtle); background:transparent; color:var(--text-secondary); font-size:16px; cursor:pointer; display:flex; align-items:center; justify-content:center; transition:all 0.2s; font-family:'DM Sans',sans-serif; }
  .close-btn:hover { border-color:var(--text-secondary); color:var(--text-primary); }

  /* ============================================
     SPLASH / INTRO VIEW
     ============================================ */

  .splash-view { padding:48px 36px 40px; }

  .splash-era {
    font-family:'JetBrains Mono',monospace; font-size:8px; text-transform:uppercase;
    letter-spacing:3px; color:var(--accent-warm); margin-bottom:20px;
  }

  .splash-display { margin-bottom:10px; line-height:0.86; }
  .splash-display-line {
    font-family:'Playfair Display',serif; font-weight:900; color:var(--text-primary);
    display:block; letter-spacing:-4px;
  }
  .splash-display-line.s96 { font-size:96px; }
  .splash-display-line.s88 { font-size:88px; }
  .splash-display-line.accent { color:var(--accent-warm); font-style:italic; }

  .splash-subtitle {
    font-family:'JetBrains Mono',monospace; font-size:9px; text-transform:uppercase;
    letter-spacing:3px; color:var(--text-dim); margin-top:18px; margin-bottom:0;
  }

  .splash-rule { border:none; height:1px; background:var(--border-rule); margin:32px 0; }

  .splash-intro {
    font-size:15px; line-height:1.8; color:var(--text-secondary); font-weight:300;
    max-width:480px; margin-bottom:32px;
  }
  .splash-intro strong { color:var(--text-primary); font-weight:500; }

  /* Echo callout */
  .echo-callout {
    position:relative; padding-left:24px; margin-bottom:40px;
  }
  .echo-callout::before {
    content:''; position:absolute; left:0; top:4px; bottom:4px; width:2px;
    background:linear-gradient(180deg,var(--accent-warm),var(--accent-echo)); border-radius:2px;
  }
  .echo-callout-label {
    font-family:'JetBrains Mono',monospace; font-size:8px; text-transform:uppercase;
    letter-spacing:3px; color:var(--accent-warm); margin-bottom:10px;
  }
  .echo-callout-text {
    font-family:'Playfair Display',serif; font-size:18px; font-style:italic; font-weight:400;
    line-height:1.55; color:var(--text-primary); letter-spacing:-0.2px;
  }

  /* Table of Contents */
  .toc-label {
    font-family:'JetBrains Mono',monospace; font-size:8px; text-transform:uppercase;
    letter-spacing:3px; color:var(--text-dim); margin-bottom:16px;
  }

  .toc-list { display:flex; flex-direction:column; gap:0; }

  .toc-item {
    display:grid;
    grid-template-columns: 48px 1fr auto;
    align-items:center;
    gap:16px;
    padding:16px 16px;
    border-top:1px solid var(--border-rule);
    cursor:pointer;
    transition:background 0.2s, padding-left 0.25s;
    border-radius:0;
  }

  .toc-item:last-child { border-bottom:1px solid var(--border-rule); }

  .toc-item:hover {
    background:var(--bg-toc-hover);
    padding-left:22px;
  }

  .toc-number {
    font-family:'Playfair Display',serif;
    font-size:36px;
    font-weight:800;
    color:var(--toc-number);
    line-height:1;
    letter-spacing:-1px;
    transition:color 0.2s;
  }

  .toc-item:hover .toc-number { color:var(--accent-warm); }

  .toc-info { display:flex; flex-direction:column; gap:3px; }

  .toc-name {
    font-family:'Playfair Display',serif;
    font-size:17px;
    font-weight:500;
    color:var(--text-primary);
    line-height:1.2;
    letter-spacing:-0.3px;
  }

  .toc-meta-row {
    display:flex; align-items:center; gap:12px;
  }

  .toc-era-tag {
    font-family:'JetBrains Mono',monospace; font-size:7px; text-transform:uppercase;
    letter-spacing:2px; color:var(--accent-warm); background:var(--tag-bg);
    padding:2px 8px; border-radius:3px;
  }

  .toc-year {
    font-family:'JetBrains Mono',monospace; font-size:9px; color:var(--text-dim);
    letter-spacing:0.5px;
  }

  .toc-arrow {
    font-size:14px; color:var(--text-faint); transition:color 0.2s, transform 0.2s;
  }

  .toc-item:hover .toc-arrow { color:var(--accent-warm); transform:translateX(4px); }

  /* Chain stats at bottom of splash */
  .chain-stats {
    display:grid; grid-template-columns:repeat(3,1fr); gap:1px;
    background:var(--border-rule); border-radius:8px; overflow:hidden;
    border:1px solid var(--border-subtle); margin-top:32px;
  }
  .chain-stat-cell { background:var(--bg-card); padding:16px 14px; text-align:center; }
  .chain-stat-big {
    font-family:'Playfair Display',serif; font-size:28px; font-weight:700;
    color:var(--number-color); letter-spacing:-1px; line-height:1; margin-bottom:4px;
  }
  .chain-stat-label {
    font-family:'JetBrains Mono',monospace; font-size:7px; text-transform:uppercase;
    letter-spacing:2px; color:var(--text-dim);
  }

  /* ============================================
     CHAIN NAV + LINK CONTENT (existing)
     ============================================ */

  .chain-nav { padding:0 36px; display:flex; border-bottom:1px solid var(--border-rule); overflow-x:auto; gap:0; }
  .chain-nav::-webkit-scrollbar { display:none; }
  .chain-tab { padding:14px 14px 12px; font-family:'JetBrains Mono',monospace; font-size:8px; text-transform:uppercase; letter-spacing:1.5px; color:var(--text-dim); white-space:nowrap; cursor:pointer; border-bottom:2px solid transparent; transition:all 0.2s; flex-shrink:0; }
  .chain-tab:hover { color:var(--text-secondary); }
  .chain-tab.active { color:var(--accent-warm); border-bottom-color:var(--accent-warm); }

  /* Back to intro button */
  .back-bar { padding:12px 36px; border-bottom:1px solid var(--border-rule); }
  .back-btn {
    font-family:'JetBrains Mono',monospace; font-size:8px; text-transform:uppercase;
    letter-spacing:2px; color:var(--text-secondary); background:transparent; border:none;
    cursor:pointer; display:flex; align-items:center; gap:8px; padding:0;
    transition:color 0.2s, gap 0.2s;
  }
  .back-btn:hover { color:var(--accent-warm); gap:10px; }

  .link-content { padding:40px 36px 28px; }
  .link-era-badge { font-family:'JetBrains Mono',monospace; font-size:8px; text-transform:uppercase; letter-spacing:3px; color:var(--accent-warm); margin-bottom:20px; }
  .link-display { margin-bottom:10px; line-height:0.88; }
  .link-display-line { font-family:'Playfair Display',serif; font-weight:800; color:var(--text-primary); display:block; letter-spacing:-3px; }
  .link-display-line.s72 { font-size:72px; }
  .link-display-line.s64 { font-size:64px; }
  .link-display-line.s80 { font-size:80px; }
  .link-display-line.accent { color:var(--accent-warm); font-style:italic; }
  .link-year-big { font-family:'JetBrains Mono',monospace; font-size:11px; color:var(--text-secondary); letter-spacing:1px; margin-top:16px; }
  .link-rule { border:none; height:1px; background:var(--border-rule); margin:28px 0; }

  .period-quote { margin-bottom:28px; padding:20px 24px; background:var(--bg-inset); border-radius:8px; border:1px solid var(--border-subtle); position:relative; }
  .period-quote-mark { font-family:'Playfair Display',serif; font-size:64px; font-weight:800; color:var(--quote-mark); line-height:0.5; position:absolute; top:18px; left:16px; opacity:0.5; }
  .period-quote-text { font-family:'Playfair Display',serif; font-size:16px; font-style:italic; font-weight:400; line-height:1.6; color:var(--text-primary); padding-left:28px; margin-bottom:10px; }
  .period-quote-attr { font-family:'JetBrains Mono',monospace; font-size:9px; letter-spacing:1px; color:var(--text-dim); padding-left:28px; }

  .link-two-col { display:grid; grid-template-columns:1fr 1fr; gap:32px; margin-bottom:28px; }
  .link-body { font-size:14px; line-height:1.8; color:var(--text-secondary); font-weight:300; }
  .link-body strong { color:var(--text-primary); font-weight:500; }
  .meta-row { border-top:1px solid var(--border-rule); padding:10px 0; }
  .meta-row:last-child { border-bottom:1px solid var(--border-rule); }
  .meta-key { font-family:'JetBrains Mono',monospace; font-size:8px; text-transform:uppercase; letter-spacing:2px; color:var(--text-dim); margin-bottom:3px; }
  .meta-val { font-size:12px; color:var(--text-primary); line-height:1.45; }

  .section-label { font-family:'JetBrains Mono',monospace; font-size:8px; text-transform:uppercase; letter-spacing:3px; color:var(--text-dim); margin-bottom:14px; }
  .numbers-row { display:grid; grid-template-columns:repeat(3,1fr); gap:1px; background:var(--border-rule); border-radius:8px; overflow:hidden; border:1px solid var(--border-subtle); margin-bottom:28px; }
  .number-cell { background:var(--bg-card); padding:18px 16px; text-align:center; }
  .number-big { font-family:'Playfair Display',serif; font-size:32px; font-weight:700; color:var(--number-color); letter-spacing:-1px; line-height:1; margin-bottom:6px; }
  .number-unit { font-family:'JetBrains Mono',monospace; font-size:8px; text-transform:uppercase; letter-spacing:2px; color:var(--text-dim); }

  .context-grid { display:grid; grid-template-columns:1fr 1fr; gap:1px; background:var(--border-rule); border-radius:8px; overflow:hidden; border:1px solid var(--border-subtle); margin-bottom:28px; }
  .context-cell { background:var(--bg-card); padding:16px 18px; }
  .context-label { font-family:'JetBrains Mono',monospace; font-size:8px; text-transform:uppercase; letter-spacing:2px; color:var(--text-dim); margin-bottom:6px; }
  .context-value { font-size:12px; color:var(--text-primary); line-height:1.5; }
  .context-cell.full-width { grid-column:1/-1; }

  .sensory-section { margin-bottom:28px; }
  .sensory-row { display:flex; align-items:baseline; gap:10px; margin-bottom:6px; }
  .s-dot { width:5px; height:5px; border-radius:50%; flex-shrink:0; position:relative; top:-1px; }
  .s-dot.auditory { background:var(--sensory-purple); }
  .s-dot.tactile { background:var(--sensory-teal); }
  .s-dot.visual { background:var(--sensory-gold); }
  .s-dot.gestural { background:var(--sensory-green); }
  .s-type { font-family:'JetBrains Mono',monospace; font-size:8px; text-transform:uppercase; letter-spacing:1.5px; color:var(--text-dim); width:56px; flex-shrink:0; }
  .s-desc { font-size:12px; color:var(--text-secondary); font-weight:300; }

  .change-pair { display:grid; grid-template-columns:1fr 1fr; gap:16px; margin-bottom:28px; }
  .change-box { border-radius:8px; padding:16px 18px; border:1px solid; }
  .change-box.gained { background:var(--gained-bg); border-color:var(--gained-border); }
  .change-box.lost { background:var(--lost-bg); border-color:var(--lost-border); }
  .change-label { font-family:'JetBrains Mono',monospace; font-size:8px; text-transform:uppercase; letter-spacing:2.5px; margin-bottom:8px; }
  .change-label.gained-label { color:var(--gained-green); }
  .change-label.lost-label { color:var(--lost-red); }
  .change-text { font-size:12px; line-height:1.65; color:var(--text-secondary); font-weight:300; }

  .carried-section { position:relative; padding-left:24px; margin-bottom:32px; }
  .carried-section::before { content:''; position:absolute; left:0; top:4px; bottom:4px; width:2px; background:linear-gradient(180deg,var(--accent-warm),var(--accent-echo)); border-radius:2px; }
  .carried-label { font-family:'JetBrains Mono',monospace; font-size:8px; text-transform:uppercase; letter-spacing:3px; color:var(--accent-warm); margin-bottom:12px; }
  .carried-text { font-family:'Playfair Display',serif; font-size:20px; font-style:italic; font-weight:400; line-height:1.55; color:var(--text-primary); letter-spacing:-0.3px; }

  .overlay-footnote { padding-top:24px; border-top:1px solid var(--border-rule); display:flex; gap:12px; align-items:flex-start; margin-bottom:12px; }
  .fn-marker { font-family:'Playfair Display',serif; font-size:20px; color:var(--accent-warm); line-height:1; flex-shrink:0; }
  .fn-text { font-size:11px; line-height:1.7; color:var(--text-secondary); font-weight:300; }

  .link-nav { display:flex; justify-content:space-between; padding:0 36px 36px; }
  .link-nav-btn { font-family:'JetBrains Mono',monospace; font-size:8px; text-transform:uppercase; letter-spacing:2px; color:var(--text-secondary); background:transparent; border:1px solid var(--border-subtle); padding:10px 20px; border-radius:4px; cursor:pointer; transition:all 0.2s; }
  .link-nav-btn:hover { border-color:var(--accent-warm); color:var(--accent-warm); }

  /* View management */
  .view-splash, .view-link { display:none; }
  .view-splash.active, .view-link.active { display:block; }

  /* Fade between views */
  @keyframes fadeIn { from { opacity:0; transform:translateY(12px); } to { opacity:1; transform:translateY(0); } }
  .view-splash.active, .view-link.active { animation:fadeIn 0.35s ease both; }

  @media (max-width:768px) {
    .overlay-panel { width:100%; }
    .splash-display-line.s96 { font-size:56px; }
    .splash-display-line.s88 { font-size:52px; }
    .link-display-line.s72 { font-size:48px; }
    .link-display-line.s64 { font-size:44px; }
    .link-display-line.s80 { font-size:52px; }
    .link-two-col,.change-pair,.context-grid { grid-template-columns:1fr; }
    .sku-card { width:240px; }
    .sku-name-large,.sku-name-accent-large { font-size:32px; }
  }
  /* ============================================ LOCKED CARD STATES ============================================ */
  .sku-card.locked { opacity:0.7; }
  .sku-card.locked:hover { opacity:0.85; }
  .lock-icon-small { width:11px; height:11px; flex-shrink:0; }
  .sku-card.locked .sku-name-large { color:var(--text-secondary); }
  .sku-card.locked .sku-name-accent-large { color:var(--text-dim); }
  .locked-badge { font-family:'JetBrains Mono',monospace; font-size:8px; text-transform:uppercase; letter-spacing:2px; color:var(--text-faint); display:flex; align-items:center; gap:6px; }
  .toc-item.locked { cursor:default; }
  .toc-item.locked:hover { background:transparent; padding-left:16px; }
  .toc-item.locked:hover .toc-number { color:var(--toc-number); }
  .toc-item.locked .toc-name { color:var(--text-dim); }
  .toc-item.locked .toc-era-tag { opacity:0.3; }
  .toc-lock-icon { color:var(--text-faint); }

  /* ============================================ PREVIEW BANNER ============================================ */
  .preview-banner { margin:28px 0; padding:20px 24px; background:var(--bg-inset); border:1px solid var(--border-subtle); border-radius:8px; display:flex; align-items:center; gap:16px; }
  .preview-banner-icon { width:32px; height:32px; border-radius:50%; border:1px solid var(--border-subtle); display:flex; align-items:center; justify-content:center; flex-shrink:0; }
  .preview-banner-icon svg { width:14px; height:14px; color:var(--text-faint); }
  .preview-banner-text { font-size:13px; line-height:1.6; color:var(--text-secondary); font-weight:300; }
  .preview-banner-text strong { color:var(--text-primary); font-weight:500; }
  .preview-release { font-family:'JetBrains Mono',monospace; font-size:8px; text-transform:uppercase; letter-spacing:2.5px; color:var(--text-faint); margin-top:8px; }

  /* ============================================ LINK VIEW ============================================ */
  .chain-nav { padding:0 36px; display:flex; border-bottom:1px solid var(--border-rule); overflow-x:auto; gap:0; }
  .chain-nav::-webkit-scrollbar { display:none; }
  .chain-tab { padding:14px 14px 12px; font-family:'JetBrains Mono',monospace; font-size:8px; text-transform:uppercase; letter-spacing:1.5px; color:var(--text-dim); white-space:nowrap; cursor:pointer; border-bottom:2px solid transparent; transition:all 0.2s; flex-shrink:0; }
  .chain-tab:hover { color:var(--text-secondary); }
  .chain-tab.active { color:var(--accent-warm); border-bottom-color:var(--accent-warm); }
  .back-bar { padding:12px 36px; border-bottom:1px solid var(--border-rule); }
  .back-btn { font-family:'JetBrains Mono',monospace; font-size:8px; text-transform:uppercase; letter-spacing:2px; color:var(--text-secondary); background:transparent; border:none; cursor:pointer; display:flex; align-items:center; gap:8px; padding:0; transition:color 0.2s, gap 0.2s; }
  .back-btn:hover { color:var(--accent-warm); gap:10px; }
  .link-content { padding:40px 36px 28px; }
  .link-era-badge { font-family:'JetBrains Mono',monospace; font-size:8px; text-transform:uppercase; letter-spacing:3px; color:var(--accent-warm); margin-bottom:20px; }
  .link-display { margin-bottom:10px; line-height:0.88; }
  .link-display-line { font-family:'Playfair Display',serif; font-weight:800; color:var(--text-primary); display:block; letter-spacing:-3px; }
  .link-display-line.s72 { font-size:72px; }
  .link-display-line.s64 { font-size:64px; }
  .link-display-line.s80 { font-size:80px; }
  .link-display-line.accent { color:var(--accent-warm); font-style:italic; }
  .link-year-big { font-family:'JetBrains Mono',monospace; font-size:11px; color:var(--text-secondary); letter-spacing:1px; margin-top:16px; }
  .link-rule { border:none; height:1px; background:var(--border-rule); margin:28px 0; }
  .period-quote { margin-bottom:28px; padding:20px 24px; background:var(--bg-inset); border-radius:8px; border:1px solid var(--border-subtle); position:relative; }
  .period-quote-mark { font-family:'Playfair Display',serif; font-size:64px; font-weight:800; color:var(--quote-mark); line-height:0.5; position:absolute; top:18px; left:16px; opacity:0.5; }
  .period-quote-text { font-family:'Playfair Display',serif; font-size:16px; font-style:italic; font-weight:400; line-height:1.6; color:var(--text-primary); padding-left:28px; margin-bottom:10px; }
  .period-quote-attr { font-family:'JetBrains Mono',monospace; font-size:9px; letter-spacing:1px; color:var(--text-dim); padding-left:28px; }
  .link-two-col { display:grid; grid-template-columns:1fr 1fr; gap:32px; margin-bottom:28px; }
  .link-body { font-size:14px; line-height:1.8; color:var(--text-secondary); font-weight:300; }
  .link-body strong { color:var(--text-primary); font-weight:500; }
  .meta-row { border-top:1px solid var(--border-rule); padding:10px 0; }
  .meta-row:last-child { border-bottom:1px solid var(--border-rule); }
  .meta-key { font-family:'JetBrains Mono',monospace; font-size:8px; text-transform:uppercase; letter-spacing:2px; color:var(--text-dim); margin-bottom:3px; }
  .meta-val { font-size:12px; color:var(--text-primary); line-height:1.45; }
  .section-label { font-family:'JetBrains Mono',monospace; font-size:8px; text-transform:uppercase; letter-spacing:3px; color:var(--text-dim); margin-bottom:14px; }
  .numbers-row { display:grid; grid-template-columns:repeat(3,1fr); gap:1px; background:var(--border-rule); border-radius:8px; overflow:hidden; border:1px solid var(--border-subtle); margin-bottom:28px; }
  .number-cell { background:var(--bg-card); padding:18px 16px; text-align:center; }
  .number-big { font-family:'Playfair Display',serif; font-size:32px; font-weight:700; color:var(--number-color); letter-spacing:-1px; line-height:1; margin-bottom:6px; }
  .number-unit { font-family:'JetBrains Mono',monospace; font-size:8px; text-transform:uppercase; letter-spacing:2px; color:var(--text-dim); }
  .context-grid { display:grid; grid-template-columns:1fr 1fr; gap:1px; background:var(--border-rule); border-radius:8px; overflow:hidden; border:1px solid var(--border-subtle); margin-bottom:28px; }
  .context-cell { background:var(--bg-card); padding:16px 18px; }
  .context-label { font-family:'JetBrains Mono',monospace; font-size:8px; text-transform:uppercase; letter-spacing:2px; color:var(--text-dim); margin-bottom:6px; }
  .context-value { font-size:12px; color:var(--text-primary); line-height:1.5; }
  .context-cell.full-width { grid-column:1/-1; }
  .sensory-section { margin-bottom:28px; }
  .sensory-row { display:flex; align-items:baseline; gap:10px; margin-bottom:6px; }
  .s-dot { width:5px; height:5px; border-radius:50%; flex-shrink:0; position:relative; top:-1px; }
  .s-dot.auditory { background:var(--sensory-purple); }
  .s-dot.tactile { background:var(--sensory-teal); }
  .s-dot.visual { background:var(--sensory-gold); }
  .s-dot.gestural { background:var(--sensory-green); }
  .s-type { font-family:'JetBrains Mono',monospace; font-size:8px; text-transform:uppercase; letter-spacing:1.5px; color:var(--text-dim); width:56px; flex-shrink:0; }
  .s-desc { font-size:12px; color:var(--text-secondary); font-weight:300; }
  .change-pair { display:grid; grid-template-columns:1fr 1fr; gap:16px; margin-bottom:28px; }
  .change-box { border-radius:8px; padding:16px 18px; border:1px solid; }
  .change-box.gained { background:var(--gained-bg); border-color:var(--gained-border); }
  .change-box.lost { background:var(--lost-bg); border-color:var(--lost-border); }
  .change-label { font-family:'JetBrains Mono',monospace; font-size:8px; text-transform:uppercase; letter-spacing:2.5px; margin-bottom:8px; }
  .change-label.gained-label { color:var(--gained-green); }
  .change-label.lost-label { color:var(--lost-red); }
  .change-text { font-size:12px; line-height:1.65; color:var(--text-secondary); font-weight:300; }
  .carried-section { position:relative; padding-left:24px; margin-bottom:32px; }
  .carried-section::before { content:''; position:absolute; left:0; top:4px; bottom:4px; width:2px; background:linear-gradient(180deg,var(--accent-warm),var(--accent-echo)); border-radius:2px; }
  .carried-label { font-family:'JetBrains Mono',monospace; font-size:8px; text-transform:uppercase; letter-spacing:3px; color:var(--accent-warm); margin-bottom:12px; }
  .carried-text { font-family:'Playfair Display',serif; font-size:20px; font-style:italic; font-weight:400; line-height:1.55; color:var(--text-primary); letter-spacing:-0.3px; }
  .overlay-footnote { padding-top:24px; border-top:1px solid var(--border-rule); display:flex; gap:12px; align-items:flex-start; margin-bottom:12px; }
  .fn-marker { font-family:'Playfair Display',serif; font-size:20px; color:var(--accent-warm); line-height:1; flex-shrink:0; }
  .fn-text { font-size:11px; line-height:1.7; color:var(--text-secondary); font-weight:300; }
  .link-nav { display:flex; justify-content:space-between; padding:0 36px 36px; }
  .link-nav-btn { font-family:'JetBrains Mono',monospace; font-size:8px; text-transform:uppercase; letter-spacing:2px; color:var(--text-secondary); background:transparent; border:1px solid var(--border-subtle); padding:10px 20px; border-radius:4px; cursor:pointer; transition:all 0.2s; }
  .link-nav-btn:hover { border-color:var(--accent-warm); color:var(--accent-warm); }

  .view-splash, .view-link, .view-about, .view-registry { display:none; }
  .view-splash.active, .view-link.active, .view-about.active, .view-registry.active { display:block; }
  @keyframes fadeIn { from { opacity:0; transform:translateY(12px); } to { opacity:1; transform:translateY(0); } }
  .view-splash.active, .view-link.active, .view-about.active, .view-registry.active { animation:fadeIn 0.35s ease both; }

  /* ============================================ ABOUT VIEW ============================================ */
  .about-view { padding:48px 36px 60px; }
  .about-pretitle { font-family:'JetBrains Mono',monospace; font-size:8px; text-transform:uppercase; letter-spacing:3px; color:var(--accent-warm); margin-bottom:24px; }
  .about-display { margin-bottom:28px; line-height:0.88; }
  .about-display-line { font-family:'Playfair Display',serif; font-weight:900; color:var(--text-primary); display:block; letter-spacing:-3px; }
  .about-display-line.s64 { font-size:64px; }
  .about-display-line.s56 { font-size:56px; }
  .about-display-line.accent { color:var(--accent-warm); font-style:italic; }
  .about-body { font-size:14px; line-height:1.85; color:var(--text-secondary); font-weight:300; max-width:500px; margin-bottom:28px; }
  .about-body strong { color:var(--text-primary); font-weight:500; }
  .about-body + .about-body { margin-top:-12px; }
  .about-section-label { font-family:'JetBrains Mono',monospace; font-size:8px; text-transform:uppercase; letter-spacing:3px; color:var(--text-dim); margin-bottom:16px; margin-top:36px; }
  .about-concept-grid { display:grid; grid-template-columns:1fr 1fr; gap:1px; background:var(--border-rule); border-radius:8px; overflow:hidden; border:1px solid var(--border-subtle); margin-bottom:28px; }
  .about-concept-cell { background:var(--bg-card); padding:20px 20px 18px; }
  .about-concept-term { font-family:'Playfair Display',serif; font-size:16px; font-weight:600; font-style:italic; color:var(--text-primary); margin-bottom:8px; }
  .about-concept-def { font-size:12px; line-height:1.65; color:var(--text-secondary); font-weight:300; }
  .about-credits { border-top:1px solid var(--border-rule); padding-top:28px; margin-top:36px; }
  .about-credit-row { display:flex; gap:16px; margin-bottom:12px; align-items:baseline; }
  .about-credit-key { font-family:'JetBrains Mono',monospace; font-size:8px; text-transform:uppercase; letter-spacing:2px; color:var(--text-dim); width:100px; flex-shrink:0; }
  .about-credit-val { font-size:13px; color:var(--text-secondary); font-weight:300; }
  .about-colophon { margin-top:36px; padding:20px 24px; background:var(--bg-inset); border-radius:8px; border:1px solid var(--border-subtle); }
  .about-colophon-text { font-family:'Playfair Display',serif; font-size:15px; font-style:italic; font-weight:400; line-height:1.65; color:var(--text-secondary); }
  .about-colophon-text strong { color:var(--text-primary); font-weight:600; }

  /* Sources */
  .about-sources { margin-bottom:36px; }
  .source-group-label { font-family:'JetBrains Mono',monospace; font-size:7px; text-transform:uppercase; letter-spacing:2.5px; color:var(--accent-warm); margin-top:20px; margin-bottom:10px; padding-bottom:6px; border-bottom:1px solid var(--border-rule); }
  .source-group-label:first-child { margin-top:0; }
  .source-entry { font-size:12px; line-height:1.7; color:var(--text-secondary); font-weight:300; margin-bottom:6px; padding-left:12px; border-left:1px solid var(--border-subtle); }
  .source-entry em { font-style:italic; color:var(--text-primary); }
  .source-url { font-family:'JetBrains Mono',monospace; font-size:10px; color:var(--text-dim); word-break:break-all; }

  /* ============================================ ECHO REGISTRY ============================================ */
  .registry-view { padding:48px 36px 60px; }
  .registry-pretitle { font-family:'JetBrains Mono',monospace; font-size:8px; text-transform:uppercase; letter-spacing:3px; color:var(--accent-warm); margin-bottom:24px; }
  .registry-display { margin-bottom:10px; line-height:0.88; }
  .registry-display-line { font-family:'Playfair Display',serif; font-weight:900; color:var(--text-primary); display:block; letter-spacing:-3px; }
  .registry-display-line.s72 { font-size:72px; }
  .registry-display-line.s64 { font-size:64px; }
  .registry-display-line.accent { color:var(--accent-warm); font-style:italic; }
  .registry-subtitle { font-family:'JetBrains Mono',monospace; font-size:9px; text-transform:uppercase; letter-spacing:3px; color:var(--text-dim); margin-top:18px; }
  .registry-rule { border:none; height:1px; background:var(--border-rule); margin:28px 0; }
  .registry-intro { font-size:14px; line-height:1.8; color:var(--text-secondary); font-weight:300; max-width:480px; margin-bottom:32px; }
  .registry-intro strong { color:var(--text-primary); font-weight:500; }
  .registry-progress { margin-bottom:36px; }
  .registry-progress-header { display:flex; justify-content:space-between; align-items:baseline; margin-bottom:10px; }
  .registry-progress-label { font-family:'JetBrains Mono',monospace; font-size:8px; text-transform:uppercase; letter-spacing:3px; color:var(--text-dim); }
  .registry-progress-count { font-family:'JetBrains Mono',monospace; font-size:11px; color:var(--accent-warm); letter-spacing:0.5px; }
  .registry-progress-track { height:3px; background:var(--border-rule); border-radius:2px; overflow:hidden; }
  .registry-progress-fill { height:100%; background:linear-gradient(90deg, var(--accent-echo), var(--accent-warm)); border-radius:2px; transition:width 0.6s cubic-bezier(0.2,0,0,1); }
  .registry-entry { border:1px solid var(--border-subtle); border-radius:10px; margin-bottom:16px; overflow:hidden; transition:all 0.35s; }
  .registry-entry.collected { background:var(--registry-collected-bg); border-color:var(--border-accent); }
  .registry-entry.locked { background:var(--registry-locked-bg); }
  .registry-entry-header { padding:18px 22px 16px; display:flex; align-items:center; gap:16px; cursor:pointer; transition:background 0.2s; }
  .registry-entry.collected .registry-entry-header:hover { background:rgba(217,175,120,0.03); }
  .registry-entry-number { font-family:'Playfair Display',serif; font-size:32px; font-weight:800; line-height:1; letter-spacing:-1px; min-width:40px; }
  .registry-entry.collected .registry-entry-number { color:var(--accent-warm); }
  .registry-entry.locked .registry-entry-number { color:var(--toc-number); }
  .registry-entry-info { flex:1; }
  .registry-entry-name { font-family:'Playfair Display',serif; font-size:16px; font-weight:500; color:var(--text-primary); margin-bottom:3px; letter-spacing:-0.3px; }
  .registry-entry.locked .registry-entry-name { color:var(--text-dim); }
  .registry-entry-meta { display:flex; gap:10px; align-items:center; }
  .registry-entry-era { font-family:'JetBrains Mono',monospace; font-size:7px; text-transform:uppercase; letter-spacing:2px; color:var(--accent-warm); background:var(--tag-bg); padding:2px 8px; border-radius:3px; }
  .registry-entry.locked .registry-entry-era { opacity:0.3; }
  .registry-entry-status { font-family:'JetBrains Mono',monospace; font-size:7px; text-transform:uppercase; letter-spacing:2px; }
  .registry-entry.collected .registry-entry-status { color:var(--gained-green); }
  .registry-entry.locked .registry-entry-status { color:var(--text-faint); }
  .registry-entry-badge { width:28px; height:28px; border-radius:50%; display:flex; align-items:center; justify-content:center; flex-shrink:0; }
  .registry-entry.collected .registry-entry-badge { background:var(--tag-bg); border:1px solid var(--border-accent); }
  .registry-entry.locked .registry-entry-badge { background:var(--bg-inset); border:1px solid var(--border-subtle); }
  .registry-entry-badge svg { width:12px; height:12px; }
  .registry-entry.collected .registry-entry-badge svg { color:var(--accent-warm); }
  .registry-entry.locked .registry-entry-badge svg { color:var(--text-faint); }
  .registry-echoes { max-height:0; overflow:hidden; transition:max-height 0.45s cubic-bezier(0.2,0,0,1); }
  .registry-entry.expanded .registry-echoes { max-height:600px; }
  .registry-echoes-inner { padding:0 22px 22px; border-top:1px solid var(--border-rule); margin:0 22px; padding-top:18px; }
  .registry-echo-row { display:flex; align-items:flex-start; gap:10px; margin-bottom:10px; opacity:0; transform:translateY(6px); transition:opacity 0.3s, transform 0.3s; }
  .registry-entry.expanded .registry-echo-row { opacity:1; transform:translateY(0); }
  .registry-entry.expanded .registry-echo-row:nth-child(1) { transition-delay:0.08s; }
  .registry-entry.expanded .registry-echo-row:nth-child(2) { transition-delay:0.14s; }
  .registry-entry.expanded .registry-echo-row:nth-child(3) { transition-delay:0.20s; }
  .registry-entry.expanded .registry-echo-row:nth-child(4) { transition-delay:0.26s; }
  .registry-echo-dot { width:5px; height:5px; border-radius:50%; flex-shrink:0; margin-top:6px; }
  .registry-echo-dot.auditory { background:var(--sensory-purple); }
  .registry-echo-dot.tactile { background:var(--sensory-teal); }
  .registry-echo-dot.visual { background:var(--sensory-gold); }
  .registry-echo-dot.gestural { background:var(--sensory-green); }
  .registry-echo-type { font-family:'JetBrains Mono',monospace; font-size:8px; text-transform:uppercase; letter-spacing:1.5px; color:var(--text-dim); width:52px; flex-shrink:0; padding-top:2px; }
  .registry-echo-desc { font-size:12px; color:var(--text-secondary); font-weight:300; line-height:1.5; }
  .registry-carried { margin-top:16px; position:relative; padding-left:18px; }
  .registry-carried::before { content:''; position:absolute; left:0; top:3px; bottom:3px; width:2px; background:linear-gradient(180deg,var(--accent-warm),var(--accent-echo)); border-radius:2px; }
  .registry-carried-label { font-family:'JetBrains Mono',monospace; font-size:7px; text-transform:uppercase; letter-spacing:2.5px; color:var(--accent-warm); margin-bottom:6px; }
  .registry-carried-text { font-family:'Playfair Display',serif; font-size:14px; font-style:italic; font-weight:400; line-height:1.55; color:var(--text-primary); letter-spacing:-0.1px; }
  .registry-locked-hint { font-family:'JetBrains Mono',monospace; font-size:8px; text-transform:uppercase; letter-spacing:2px; color:var(--text-faint); padding:0 22px 18px; display:flex; align-items:center; gap:8px; }
  .registry-stats { display:grid; grid-template-columns:repeat(3,1fr); gap:1px; background:var(--border-rule); border-radius:8px; overflow:hidden; border:1px solid var(--border-subtle); margin-top:32px; }
  .registry-stat-cell { background:var(--bg-card); padding:16px 14px; text-align:center; }
  .registry-stat-big { font-family:'Playfair Display',serif; font-size:28px; font-weight:700; color:var(--number-color); letter-spacing:-1px; line-height:1; margin-bottom:4px; }
  .registry-stat-big.accent { color:var(--accent-warm); }
  .registry-stat-label { font-family:'JetBrains Mono',monospace; font-size:7px; text-transform:uppercase; letter-spacing:2px; color:var(--text-dim); }

  /* ============================================ TOAST ============================================ */
  @keyframes echoCollected {
    0% { opacity:0; transform:translateY(12px) scale(0.96) translateX(-50%); }
    15% { opacity:1; transform:translateY(0) scale(1) translateX(-50%); }
    85% { opacity:1; transform:translateY(0) scale(1) translateX(-50%); }
    100% { opacity:0; transform:translateY(-8px) scale(0.98) translateX(-50%); }
  }
  .echo-toast { position:fixed; bottom:32px; left:50%; transform:translateX(-50%); background:var(--bg-card); border:1px solid var(--border-accent); border-radius:8px; padding:12px 24px; z-index:600; display:flex; align-items:center; gap:12px; box-shadow:0 12px 40px var(--shadow-card); animation:echoCollected 2.4s ease both; pointer-events:none; }
  .echo-toast-icon { width:20px; height:20px; color:var(--accent-warm); }
  .echo-toast-text { font-family:'JetBrains Mono',monospace; font-size:9px; text-transform:uppercase; letter-spacing:2px; color:var(--text-primary); }
  .echo-toast-sub { font-family:'JetBrains Mono',monospace; font-size:8px; letter-spacing:1px; color:var(--text-dim); margin-top:2px; }

  /* ============================================ RESPONSIVE ============================================ */
  @media (max-width:768px) {
    .overlay-panel { width:100%; }
    .splash-display-line.s96 { font-size:56px; }
    .splash-display-line.s88 { font-size:52px; }
    .link-display-line.s72 { font-size:48px; }
    .link-display-line.s64 { font-size:44px; }
    .link-display-line.s80 { font-size:52px; }
    .link-two-col,.change-pair,.context-grid,.about-concept-grid { grid-template-columns:1fr; }
    .sku-card { width:240px; }
    .sku-name-large,.sku-name-accent-large { font-size:32px; }
    .registry-display-line.s72 { font-size:48px; }
    .registry-display-line.s64 { font-size:44px; }
    .about-display-line.s64 { font-size:44px; }
    .about-display-line.s56 { font-size:40px; }
  }

</style>
</head>
<body>

  <!-- TOP NAV -->
  <div class="top-bar">
    <div style="display:flex;align-items:baseline;">
      <div class="project-title">Skeuomorphic <em>Echoes</em></div>
      <span class="project-subtitle">From Atoms to Pixels</span>
    </div>
    <div class="nav-right">
      <a class="nav-link active-nav" id="navTimeline" onclick="closeAllOverlays()">Timeline</a>
      <a class="nav-link" id="navRegistry" onclick="openRegistryOverlay()">Echo Registry</a>
      <div class="theme-toggle" id="themeToggle" role="button" aria-label="Toggle theme" tabindex="0">
        <div class="toggle-knob">
          <div class="toggle-icon">
            <svg class="icon-moon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="color:var(--bg-deep);"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/></svg>
            <svg class="icon-sun" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="color:var(--bg-deep);"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>
          </div>
        </div>
      </div>
      <button class="info-btn" onclick="openAboutOverlay()">i</button>
    </div>
  </div>

  <!-- ERA BAR -->
  <div class="era-bar" id="eraBar">
    <div class="era-bar-scroll" id="eraScroll">
      <div class="era-zone">Hand-Powered</div>
      <div class="era-zone">Mechanical</div>
      <div class="era-zone">Electric</div>
      <div class="era-zone">Digital</div>
      <div class="era-zone">Virtual</div>
    </div>
  </div>

  <!-- TIMELINE -->
  <div class="main">
    <div class="timeline-viewport" id="viewport">
      <div class="timeline-canvas" id="canvas">
        <div class="timeline-line">
          <div class="era-tick" style="left:20%;"></div>
          <div class="era-tick" style="left:40%;"></div>
          <div class="era-tick" style="left:60%;"></div>
          <div class="era-tick" style="left:80%;"></div>
        </div>
        <div class="year-marker" style="left:4%;">3000 BC</div>
        <div class="year-marker" style="left:12%;">1400</div>
        <div class="year-marker" style="left:22%;">1700</div>
        <div class="year-marker" style="left:32%;">1830</div>
        <div class="year-marker" style="left:42%;">1880</div>
        <div class="year-marker" style="left:52%;">1920</div>
        <div class="year-marker" style="left:62%;">1960</div>
        <div class="year-marker" style="left:72%;">1980</div>
        <div class="year-marker" style="left:82%;">2000</div>
        <div class="year-marker" style="left:92%;">2020</div>
        <div class="year-marker" style="left:97%;">Now</div>

        <div class="timeline-dot" style="left:10%;"></div><div class="stem up" style="left:calc(10% - 0.5px);"></div>
        <div class="timeline-dot" style="left:30%;"></div><div class="stem down" style="left:calc(30% - 0.5px);"></div>
        <div class="timeline-dot" style="left:50%;"></div><div class="stem up" style="left:calc(50% - 0.5px);"></div>
        <div class="timeline-dot" style="left:72%;"></div><div class="stem down" style="left:calc(72% - 0.5px);"></div>
        <div class="timeline-dot active" style="left:91%;"></div><div class="stem up active" style="left:calc(91% - 0.5px);"></div>

        <!-- SKU 05 — Shopping Cart (preview) -->
        <div class="sku-card locked above" style="left:calc(10% - 150px);" onclick="openSkuOverlay(4)"><div class="sku-inner"><div class="sku-counter"><svg class="lock-icon-small" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" style="color:var(--text-dim);"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></svg>Skeuomorph 05</div><div class="sku-name-large">Shopping</div><div class="sku-name-accent-large">Cart</div><div class="sku-rule"></div><div class="sku-tease">No wheels. No aisles. You&rsquo;re still adding to cart.</div><div class="locked-badge">Out of Stock</div></div></div>
        <!-- SKU 04 — "Hanging Up" (preview) -->
        <div class="sku-card locked below" style="left:calc(30% - 150px);" onclick="openSkuOverlay(3)"><div class="sku-inner"><div class="sku-counter"><svg class="lock-icon-small" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" style="color:var(--text-dim);"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></svg>Skeuomorph 04</div><div class="sku-name-large">&ldquo;Hanging</div><div class="sku-name-accent-large">Up&rdquo;</div><div class="sku-rule"></div><div class="sku-tease">The phone left the hook decades ago. The gesture never did.</div><div class="locked-badge">Line Disconnected</div></div></div>
        <!-- SKU 03 — The Envelope (preview) -->
        <div class="sku-card locked above" style="left:calc(50% - 150px);" onclick="openSkuOverlay(2)"><div class="sku-inner"><div class="sku-counter"><svg class="lock-icon-small" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" style="color:var(--text-dim);"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></svg>Skeuomorph 03</div><div class="sku-name-large">The</div><div class="sku-name-accent-large">Envelope</div><div class="sku-rule"></div><div class="sku-tease">Sealed, stamped, and delivered to a mailbox that doesn&rsquo;t exist.</div><div class="locked-badge">Return to Sender</div></div></div>
        <!-- SKU 02 — Shutter Click (preview) -->
        <div class="sku-card locked below" style="left:calc(72% - 150px);" onclick="openSkuOverlay(1)"><div class="sku-inner"><div class="sku-counter"><svg class="lock-icon-small" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" style="color:var(--text-dim);"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></svg>Skeuomorph 02</div><div class="sku-name-large">Shutter</div><div class="sku-name-accent-large">Click</div><div class="sku-rule"></div><div class="sku-tease">The mechanical mirror slap of a camera that exists only as a speaker tone.</div><div class="locked-badge">Negatives Not Yet Developed</div></div></div>
        <!-- SKU 01 — Onscreen Keyboard (PRIMARY) -->
        <div class="sku-card active above" style="left:calc(91% - 150px);" onclick="openSkuOverlay(0)"><div class="sku-inner"><div class="sku-counter">Skeuomorph 01</div><div class="sku-name-large">Onscreen</div><div class="sku-name-accent-large">Keyboard</div><div class="sku-rule"></div><div class="sku-tease">A layout designed to prevent mechanical jamming &mdash; rendered on glass with no moving parts.</div><div class="sku-cta">Explore the chain <span>&rarr;</span></div></div></div>
      </div>
    </div>
  </div>
  <div class="click-hint" id="scrollHint"><span class="scroll-arrows">&larr; &rarr;</span>Scroll to explore</div>

  <!-- CHAIN OVERLAY -->
  <div class="overlay" id="overlay" onclick="closeOverlay(event)">
    <div class="overlay-panel" id="overlayPanel" onclick="event.stopPropagation()"></div>
  </div>

  <!-- ABOUT OVERLAY -->
  <div class="overlay" id="aboutOverlay" onclick="closeAboutOverlay(event)">
    <div class="overlay-panel" onclick="event.stopPropagation()">
      <div class="overlay-header">
        <div class="overlay-title-bar"><span class="overlay-sku-label">Info</span><span class="overlay-sku-name">About This Project</span></div>
        <button class="close-btn" onclick="closeAboutOverlay()">&times;</button>
      </div>
      <div class="view-about active">
        <div class="about-view">
          <div class="about-pretitle">About</div>
          <div class="about-display"><span class="about-display-line s56">Skeuomorphic</span><span class="about-display-line s64 accent">Echoes</span></div>
          <hr class="splash-rule">
          <p class="about-body">Every digital interface carries ghosts. The shopping cart icon on your screen has no wheels. The phone you &ldquo;hang up&rdquo; has no hook. The envelope in your inbox was never sealed. These are <strong>skeuomorphic echoes</strong> &mdash; design elements inherited from physical objects that no longer exist in the thing they describe.</p>
          <p class="about-body">This project traces those echoes backward through time, link by link, to the original physical object that created them. Each <strong>skeuomorph</strong> is presented as a chain of evolutionary steps &mdash; from atom to pixel &mdash; revealing how sensory experiences like sound, touch, and gesture persist long after the technology that produced them has disappeared.</p>
          <div class="about-section-label">Key Concepts</div>
          <div class="about-concept-grid">
            <div class="about-concept-cell"><div class="about-concept-term">Skeuomorph</div><div class="about-concept-def">A design element that imitates the appearance or behavior of something from a different material or era, serving no functional purpose in its new context.</div></div>
            <div class="about-concept-cell"><div class="about-concept-term">The Echo</div><div class="about-concept-def">The specific sensory or behavioral remnant that survives in today&rsquo;s digital interface &mdash; the thing you can still hear, feel, or do that originated in a now-extinct object.</div></div>
            <div class="about-concept-cell"><div class="about-concept-term">The Chain</div><div class="about-concept-def">The evolutionary sequence of objects connecting the original physical artifact to its modern digital descendant, each link passing forward some traits while losing others.</div></div>
            <div class="about-concept-cell"><div class="about-concept-term">Echo Registry</div><div class="about-concept-def">Your personal log of collected sensory echoes &mdash; sounds, textures, gestures, and visual patterns discovered as you explore each link in a chain.</div></div>
          </div>
          <div class="about-section-label">How to Explore</div>
          <p class="about-body">Begin at the <strong>Timeline</strong>. The primary skeuomorph &mdash; <strong>Onscreen Keyboard</strong> &mdash; is fully explorable: click its card to open its chain and trace the echo backward through six evolutionary links. As you visit each link, its sensory echoes are automatically collected in your <strong>Echo Registry</strong>. The four remaining skeuomorphs are previews &mdash; their chains are visible but not yet available to explore.</p>
          <div class="about-colophon"><div class="about-colophon-text">Designed as an exercise in <strong>information architecture</strong> and <strong>editorial design for the screen</strong>. Every typeface, spacing decision, and interaction pattern was chosen to echo the materiality of the objects being described &mdash; ink on paper, metal on ribbon, light on glass.</div></div>
          <div class="about-section-label">Sources</div>
          <div class="about-sources">
            <div class="source-group-label">Skeuomorphism &amp; Design Theory</div>
            <div class="source-entry">Norman, Don. <em>The Design of Everyday Things.</em> Basic Books, revised edition, 2013.</div>
            <div class="source-entry">&ldquo;Skeuomorphism.&rdquo; Nielsen Norman Group, 3 June 2024. <span class="source-url">nngroup.com/articles/skeuomorphism</span></div>
            <div class="source-entry">&ldquo;What is Skeuomorphism?&rdquo; Interaction Design Foundation. <span class="source-url">interaction-design.org/literature/topics/skeuomorphism</span></div>
            <div class="source-entry">&ldquo;Skeuomorph.&rdquo; Wikipedia. <span class="source-url">en.wikipedia.org/wiki/Skeuomorph</span></div>

            <div class="source-group-label">The Typewriter &amp; QWERTY</div>
            <div class="source-entry">Stamp, Jimmy. &ldquo;The QWERTY Keyboard Will Never Die.&rdquo; <em>Smithsonian Magazine</em>, 3 May 2013. <span class="source-url">smithsonianmag.com/history/the-qwerty-keyboard-will-never-die-where-did-the-150-year-old-design-come-from-49863249</span></div>
            <div class="source-entry">&ldquo;Christopher Latham Sholes.&rdquo; <em>Encyclop&aelig;dia Britannica</em>. <span class="source-url">britannica.com/biography/Christopher-Latham-Sholes</span></div>
            <div class="source-entry">&ldquo;Production on the Sholes and Glidden Type-Writer Began.&rdquo; Library of Congress Business Reference Services. <span class="source-url">guides.loc.gov/this-month-in-business-history/march/typewriter-production-began</span></div>
            <div class="source-entry">&ldquo;Christopher Latham Sholes.&rdquo; National Inventors Hall of Fame. <span class="source-url">invent.org/inductees/christopher-sholes</span></div>
            <div class="source-entry">&ldquo;Origins of the QWERTY Keyboard.&rdquo; WI101, University of Wisconsin. <span class="source-url">wi101.wisc.edu/qwerty-keyboard-and-morse-code</span></div>

            <div class="source-group-label">The IBM Selectric</div>
            <div class="source-entry">&ldquo;The IBM Selectric.&rdquo; IBM Corporate Archives. <span class="source-url">ibm.com/history/selectric</span></div>
            <div class="source-entry">&ldquo;IBM Selectric.&rdquo; Wikipedia. <span class="source-url">en.wikipedia.org/wiki/IBM_Selectric</span></div>

            <div class="source-group-label">The Shopping Cart</div>
            <div class="source-entry">Wilson, Terry P. <em>The Cart That Changed the World: The Career of Sylvan N. Goldman.</em> University of Oklahoma Press, 1978.</div>
            <div class="source-entry">&ldquo;Goldman, Sylvan Nathan.&rdquo; <em>The Encyclopedia of Oklahoma History and Culture</em>, Oklahoma Historical Society. <span class="source-url">okhistory.org/publications/enc/entry?entry=GO004</span></div>
            <div class="source-entry">&ldquo;How the Shopping Cart Went From Failure to Fixture.&rdquo; <em>History.com</em>, 30 July 2025. <span class="source-url">history.com/articles/shopping-cart-inventor-sylvan-goldman-supermarkets</span></div>

            <div class="source-group-label">Writing Instruments</div>
            <div class="source-entry">Finlay, Michael. <em>Western Writing Implements in the Age of the Quill Pen.</em> Plains Books, 1990.</div>
            <div class="source-entry">&ldquo;History of the Steel Pen Trade.&rdquo; Birmingham Pen Trade Heritage Association. <span class="source-url">penroom.co.uk</span></div>

            <div class="source-group-label">The iPhone &amp; Touchscreen Keyboard</div>
            <div class="source-entry">Jobs, Steve. &ldquo;iPhone Keynote.&rdquo; Macworld Conference &amp; Expo, San Francisco, 9 January 2007.</div>
            <div class="source-entry">Isaacson, Walter. <em>Steve Jobs.</em> Simon &amp; Schuster, 2011.</div>
          </div>

          <div class="about-credits">
            <div class="about-section-label">Colophon</div>
            <div class="about-credit-row"><div class="about-credit-key">Display</div><div class="about-credit-val">Playfair Display &mdash; serif with editorial weight</div></div>
            <div class="about-credit-row"><div class="about-credit-key">Body</div><div class="about-credit-val">DM Sans &mdash; humanist clarity</div></div>
            <div class="about-credit-row"><div class="about-credit-key">Mono</div><div class="about-credit-val">JetBrains Mono &mdash; technical precision</div></div>
            <div class="about-credit-row"><div class="about-credit-key">Palette</div><div class="about-credit-val">Warm amber on deep charcoal &mdash; ink and parchment</div></div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- REGISTRY OVERLAY -->
  <div class="overlay" id="registryOverlay" onclick="closeRegistryOverlay(event)">
    <div class="overlay-panel" onclick="event.stopPropagation()">
      <div class="overlay-header">
        <div class="overlay-title-bar"><span class="overlay-sku-label">Collection</span><span class="overlay-sku-name">Echo Registry</span></div>
        <button class="close-btn" onclick="closeRegistryOverlay()">&times;</button>
      </div>
      <div class="view-registry active">
        <div class="registry-view">
          <div class="registry-pretitle">Your Collection</div>
          <div class="registry-display"><span class="registry-display-line s64">Echo</span><span class="registry-display-line s72 accent">Registry</span></div>
          <div class="registry-subtitle">Sensory ghosts, cataloged</div>
          <hr class="registry-rule">
          <p class="registry-intro">Every link in a chain carries sensory echoes &mdash; sounds, textures, gestures, and visual patterns that persist across centuries. <strong>Visit a link</strong> to collect its echoes. Expand any collected entry to see what your exploration uncovered.</p>
          <div class="registry-progress">
            <div class="registry-progress-header">
              <div class="registry-progress-label">Links Explored</div>
              <div class="registry-progress-count" id="registryCount">0 / 6 collected</div>
            </div>
            <div class="registry-progress-track"><div class="registry-progress-fill" id="registryFill" style="width:0%;"></div></div>
          </div>
          <div id="registryList"></div>
          <div class="registry-stats">
            <div class="registry-stat-cell"><div class="registry-stat-big accent" id="registryEchoCount">0</div><div class="registry-stat-label">Echoes Found</div></div>
            <div class="registry-stat-cell"><div class="registry-stat-big" id="registryModesCount">0 / 4</div><div class="registry-stat-label">Sensory Modes</div></div>
            <div class="registry-stat-cell"><div class="registry-stat-big" id="registryYearSpan">&mdash;</div><div class="registry-stat-label">Years Traversed</div></div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div id="toastContainer"></div>

  <script>
  // ============================================
  // PRIMARY SKEUOMORPH — FULL CHAIN DATA
  // ============================================
  const PRIMARY = {
    id:'keyboard', number:'01', titleLines:['The','Onscreen','Keyboard'], accentLine:1,
    subtitle:'From quill to glass',
    intro:'The keyboard on your phone preserves a layout invented in <strong>1873</strong> to prevent metal arms from colliding inside a machine you\'ve never touched. The click you hear is fake. The keys don\'t move. Yet your thumbs know exactly where every letter is — because a typist in Milwaukee arranged them there over 150 years ago.',
    echo:'A QWERTY layout on a flat glass screen, a haptic vibration pretending to be a keystroke, and a click sound synthesized from nothing — all ghosts of a mechanical typewriter.',
    stats:[{big:'5,000+',label:'Years Spanned'},{big:'4',label:'Sensory Modes'},{big:'1873',label:'Year Echo Was Born'}],
    links:[
      {name:'Quill on Parchment',
        tabName:'01 Quill',
        era:'Hand-Powered',
        year:'3000 BC – 1800s',
        displayLines:[{text:'Quill on',size:'s72'},{text:'Parchment',size:'s80',accent:true}],
        quote:{text:'A goose quill is mightier than a lion\'s claw.',attr:'— Arabic proverb'},
        body:'For nearly five thousand years, the primary writing instrument was a feather. Goose, swan, or crow quills were carefully trimmed to a point, split at the tip to create a channel for ink, and dragged across animal skin stretched thin enough to write on. Every letter was a physical negotiation between hand pressure, ink viscosity, and the absorbency of the surface.',
        meta:[{k:'Origin',v:'Ancient Egypt, Mesopotamia'},{k:'Materials',v:'Goose feather shaft, iron gall ink, prepared animal skin (vellum)'},{k:'Lifespan',v:'A quill tip lasted approximately one week of daily use'},{k:'Preparation',v:'Curing, hardening in hot sand, careful splitting of the nib'},{k:'Status',v:'Extinct as functional tool — ceremonial use only'}],
        numbers:[{big:'5,000',unit:'Years of Use'},{big:'~20',unit:'Words per Minute'},{big:'1',unit:'Week per Quill'}],
        context:[{l:'Who Used It',v:'Monks, scribes, scholars, merchants, royal clerks'},{l:'Where',v:'Scriptoriums, courts, counting houses, private studies'},{l:'Skill Required',v:'Years of apprenticeship; penmanship was a professional trade'},{l:'Body Posture',v:'Seated upright, arm elevated, wrist locked at angle'},{l:'Cultural Significance',v:'Writing was power — literacy was restricted, and the scribe class held enormous influence. The quill was the instrument of law, religion, and commerce.',full:true}],
        sensory:[{cls:'auditory',type:'Sound',desc:'Scratch of quill tip on vellum, the wet drag of fresh ink'},{cls:'tactile',type:'Touch',desc:'Feather shaft between fingers, angled grip, pressure to split the nib'},{cls:'visual',type:'Sight',desc:'Ink pooling at the start of each stroke, visible line-width variation'},{cls:'gestural',type:'Gesture',desc:'Dipping into the inkwell every few words, blotting excess'}],
        gained:'The ability to record language permanently. Externalized memory. Portable thought.',
        lost:'Nothing — this is the origin point. But it replaced oral tradition, and with writing came the slow erosion of feats of memorization.',
        carried:'The act of writing by hand — pressure, angle, and the irreversible commitment of ink to surface. Every stroke is a decision.',
        footnote:'The word "pen" comes from the Latin penna, meaning feather. We still call them pens even though no feather has been involved for over a century.'},
      {name:'Steel Nib Pen',
        tabName:'02 Nib Pen',
        era:'Hand-Powered',
        year:'1820s – 1960s',
        displayLines:[{text:'Steel',size:'s72'},{text:'Nib Pen',size:'s80',accent:true}],
        quote:{text:'The pen is the tongue of the mind.',attr:'— Miguel de Cervantes'},
        body:'The steel nib replaced the organic quill with a manufactured point — mass-produced, interchangeable, and consistent. For the first time, the writing instrument was <strong>modular</strong>: a holder that lasted years paired with disposable nibs that could be swapped for different line weights. Writing was no longer dependent on finding and preparing a good feather.',
        meta:[{k:'Inventor',v:'John Mitchell (mass production), Joseph Gillott'},{k:'Origin',v:'Birmingham, England — the steel pen capital'},{k:'Materials',v:'Tempered steel nib, wooden or vulcanite holder, bottled ink'},{k:'Innovation',v:'Mass production of consistent, interchangeable nibs'},{k:'Status',v:'Niche — calligraphy and art supply'}],
        numbers:[{big:'50+',unit:'Nib Varieties'},{big:'~25',unit:'Words per Minute'},{big:'1830',unit:'Mass Production Begins'}],
        context:[{l:'Who Used It',v:'Clerks, students, authors, illustrators, postal workers'},{l:'Where',v:'Schools, offices, post offices, homes — writing democratized'},{l:'Skill Required',v:'Still significant — italic hand, copperplate, and business hand were taught formally'},{l:'Body Posture',v:'Similar to quill but more relaxed; the nib did more of the work'},{l:'Cultural Significance',v:'The steel pen democratized writing. Cheap nibs meant schoolchildren could learn penmanship, and correspondence became a middle-class habit.',full:true}],
        sensory:[{cls:'auditory',type:'Sound',desc:'Finer, sharper scratch than quill; metallic whisper on paper'},{cls:'tactile',type:'Touch',desc:'Cool metal holder, interchangeable nib tips, controlled pressure'},{cls:'visual',type:'Sight',desc:'Precise hairline-to-swell strokes, nib flexibility visible in letterforms'},{cls:'gestural',type:'Gesture',desc:'Still dipping, but less often; the pen became an extension of the hand'}],
        gained:'Consistency. Modularity. Affordability. Writing became accessible to ordinary people, not just professional scribes.',
        lost:'The organic warmth of the quill. The ritual of preparing your own instrument. The feather\'s natural flex, which gave early writing its calligraphic character.',
        carried:'Standardized point sizes, replaceable components, and the idea that the writing instrument is modular — not grown, but manufactured.',
        footnote:'Birmingham produced over half the world\'s steel pen nibs by the 1850s, earning it the nickname "the city of a thousand trades."'},
      {name:'The Manual Typewriter',
        tabName:'03 Typewriter',
        era:'Mechanical',
        year:'1873 – 1960s',
        displayLines:[{text:'The',size:'s72'},{text:'Manual',size:'s80',accent:true},{text:'Typewriter',size:'s64'}],
        quote:{text:'The type-writer is especially useful to literary men, clergymen, and all who desire to escape the drudgery of the pen.',attr:'— Remington & Sons advertisement, 1875'},
        body:'The first commercially successful typewriter introduced the <strong>QWERTY layout</strong> — keys arranged specifically to prevent neighboring typebars from jamming when struck in quick succession. Each keystroke sent a metal arm swinging upward to stamp an inked ribbon against paper, producing a sharp mechanical clack that would echo through offices for nearly a century.',
        meta:[{k:'Inventor',v:'Christopher Latham Sholes'},{k:'Origin',v:'Milwaukee, Wisconsin, USA'},{k:'Manufacturer',v:'E. Remington & Sons'},{k:'Materials',v:'Cast iron frame, steel typebars, inked fabric ribbon, paper platen'},{k:'Cost at Launch',v:'$125 (~$3,200 adjusted)'},{k:'Status',v:'Extinct — rare collector item'}],
        numbers:[{big:'87',unit:'Years of Dominance'},{big:'~60',unit:'Words per Minute'},{big:'42',unit:'Keys on Original'}],
        context:[{l:'Who Used It',v:'Secretaries, journalists, authors, legal clerks, office workers'},{l:'Where',v:'Offices, newsrooms, law firms, home studies'},{l:'Skill Required',v:'Touch typing — a trained profession, often 6+ months of practice'},{l:'Body Posture',v:'Seated upright, both hands on home row, eyes on copy'},{l:'Cultural Significance',v:'The typewriter opened professional writing to women, creating the role of the typist and reshaping the office workforce. By 1910, over 80% of typists in the US were women.',full:true}],
        sensory:[{cls:'auditory',type:'Sound',desc:'Mechanical clack of typebar striking ribbon and platen, carriage return bell'},{cls:'tactile',type:'Touch',desc:'Heavy key resistance (~60g force), full finger travel, lever pull for carriage return'},{cls:'visual',type:'Sight',desc:'QWERTY layout, circular glass-topped keycaps, visible typebar basket'},{cls:'gestural',type:'Gesture',desc:'Reaching to slap the carriage return lever at the end of each line'}],
        gained:'Standardized, repeatable letterforms. Speed increased from ~20 wpm to ~60 wpm. Multiple carbon copies possible. QWERTY created a universal input standard.',
        lost:'The individuality of handwriting. Personal character in letterforms. The ability to sketch or annotate in margins. Silence — the typewriter introduced noise as a byproduct of writing.',
        carried:'The QWERTY layout, the satisfying click of each keystroke, the carriage return (now the Enter key), and the idea that typing is a deliberate one-character-at-a-time act. This is the link where the echo is born.',
        footnote:'The word "typewriter" can be typed entirely on the top row of a QWERTY keyboard — likely a deliberate trick by early salesmen demonstrating the machine.'},
      {name:'The Electric Typewriter',
        tabName:'04 Electric',
        era:'Electric',
        year:'1930s – 1980s',
        displayLines:[{text:'The',size:'s72'},{text:'Electric',size:'s80',accent:true},{text:'Typewriter',size:'s64'}],
        quote:{text:'The IBM Selectric made typing feel effortless. It was the machine that made the machine disappear.',attr:'— Design historian John Harwood'},
        body:'The electric typewriter replaced brute-force finger power with a motor. IBM\'s <strong>Selectric</strong> replaced the entire typebar mechanism with a single rotating golf ball element, eliminating jams entirely. Keys became feather-light. The carriage return became a button press. For the first time, the act of typing felt <em>easy</em>.',
        meta:[{k:'Key Model',v:'IBM Selectric (1961)'},{k:'Origin',v:'Lexington, Kentucky, USA'},{k:'Innovation',v:'Golf ball element — single rotating type head replaces typebar basket'},{k:'Materials',v:'Plastic housing, electric motor, ribbon cartridge'},{k:'Cost',v:'$450 (~$4,500 adjusted)'},{k:'Status',v:'Extinct — some still in use by novelists'}],
        numbers:[{big:'13M',unit:'Selectrics Sold'},{big:'~90',unit:'Words per Minute'},{big:'96',unit:'Characters per Element'}],
        context:[{l:'Who Used It',v:'Office professionals, executives, authors, government agencies'},{l:'Where',v:'Corporate offices, typing pools, newsrooms, home offices'},{l:'Skill Required',v:'Much less — light touch meant less fatigue, faster training'},{l:'Body Posture',v:'More relaxed; the machine did the striking, you just triggered it'},{l:'Cultural Significance',v:'The Selectric became a status symbol in offices. Its interchangeable font balls let a single typist produce documents in multiple typefaces — desktop publishing before the term existed.',full:true}],
        sensory:[{cls:'auditory',type:'Sound',desc:'Softer, motorized hum; rapid-fire ball or daisy wheel strikes'},{cls:'tactile',type:'Touch',desc:'Light touch activation (~25g), powered key return, effortless repetition'},{cls:'visual',type:'Sight',desc:'Proportional spacing, correction ribbon, Selectric\'s golf ball element'},{cls:'gestural',type:'Gesture',desc:'Automatic carriage return — the lever pull reduced to a key press'}],
        gained:'Speed without effort. Proportional spacing. Interchangeable typefaces. Correction ribbon (the first "undo"). Near-silent operation compared to manual.',
        lost:'The full-body engagement of manual typing. The satisfying resistance and percussive feedback. The mechanical honesty — with electric, the connection between finger and letter became indirect.',
        carried:'Light-touch keys, automatic line returns, and the expectation that the machine does the heavy work — you only supply the intention.',
        footnote:'The Selectric\'s golf ball could be swapped in seconds, letting typists switch between fonts mid-document — a capability that wouldn\'t return until word processors arrived decades later.'},
      {name:'The Computer Keyboard',
        tabName:'05 Keyboard',
        era:'Digital',
        year:'1970s – Present',
        displayLines:[{text:'Computer',size:'s72'},{text:'Keyboard',size:'s80',accent:true}],
        quote:{text:'The keyboard is the last physical object standing between you and pure thought made digital.',attr:'— Interface design maxim'},
        body:'When computers needed human input, engineers didn\'t invent something new — they bolted a typewriter keyboard onto a terminal. The <strong>QWERTY layout survived intact</strong>, even though there were no typebars to jam. Mechanical switches replaced the typewriter\'s action but deliberately preserved tactile feedback and audible clicks.',
        meta:[{k:'Key Innovation',v:'Electronic switch replaces mechanical typebar — keystrokes become electrical signals'},{k:'Origin',v:'Derived from Teletype terminals (1960s), standardized on IBM PC (1981)'},{k:'Materials',v:'Plastic keycaps, mechanical or membrane switches, PCB, USB/PS2 cable'},{k:'Variants',v:'Mechanical (Cherry MX), membrane, scissor, capacitive'},{k:'Status',v:'Thriving — billions in daily use worldwide'}],
        numbers:[{big:'~100',unit:'Keys Standard'},{big:'~120',unit:'WPM Record Typist'},{big:'1981',unit:'IBM PC Keyboard'}],
        context:[{l:'Who Used It',v:'Everyone — from programmers to children to grandparents'},{l:'Where',v:'Desks, laps, standing desks — anywhere with a screen'},{l:'Skill Required',v:'Highly variable — hunt-and-peck to 120+ WPM touch typists'},{l:'Body Posture',v:'All ten fingers on home row, Ctrl+Z to undo'},{l:'Cultural Significance',v:'The computer keyboard is the most widely used human-machine interface in history. It preserved QWERTY not out of necessity but out of sheer cultural inertia — billions of trained fingers.',full:true}],
        sensory:[{cls:'auditory',type:'Sound',desc:'Mechanical switch click (Cherry MX), or muted membrane press'},{cls:'tactile',type:'Touch',desc:'Spring resistance, tactile bump at actuation point, keycap texture'},{cls:'visual',type:'Sight',desc:'QWERTY preserved exactly, backlit legends, function row, modifier keys'},{cls:'gestural',type:'Gesture',desc:'All ten fingers on home row, Ctrl+Z to undo (no more correction ribbon)'}],
        gained:'Infinite undo. Copy/paste. Text editing without retyping. The delete key. The cursor. Every keystroke became editable, reversible, and impermanent.',
        lost:'The permanence of typed text. The commitment of each keystroke. The physical document — screens replaced paper as the primary destination of typed words.',
        carried:'The full QWERTY layout, the physical key as input unit, and the myth that typing speed correlates with productivity.',
        footnote:'The mechanical keyboard community has revived interest in switch types, keycap materials, and sound profiles — essentially optimizing the sensory experience of a 150-year-old layout.'},
      {name:'The Onscreen Keyboard',
        tabName:'06 Onscreen',
        era:'Virtual',
        year:'2007 – Present',
        displayLines:[{text:'The',size:'s72'},{text:'Onscreen',size:'s80',accent:true},{text:'Keyboard',size:'s64'}],
        quote:{text:'We\'re going to use a pointing device that we\'re all born with — our fingers.',attr:'— Steve Jobs, iPhone keynote, 2007'},
        body:'When Apple removed the physical keyboard from the iPhone in 2007, they faced a design problem: people expected keys. So they drew them on glass. The <strong>QWERTY layout was preserved pixel-for-pixel</strong>. A haptic motor simulated the feel of a press. A speaker played a synthetic click. Every sensory element of the physical keyboard was faked.',
        meta:[{k:'Key Innovation',v:'Capacitive multi-touch glass replaces physical keys entirely'},{k:'Origin',v:'Apple iPhone, Cupertino, California, 2007'},{k:'Materials',v:'Gorilla Glass, capacitive touch sensor, haptic motor, tiny speaker'},{k:'Typing Method',v:'Two thumbs on glass, autocorrect compensating for imprecision'},{k:'Status',v:'Dominant — the primary keyboard for billions of people'}],
        numbers:[{big:'6.8B',unit:'Smartphones Worldwide'},{big:'~40',unit:'WPM on Glass'},{big:'2007',unit:'iPhone Launch'}],
        context:[{l:'Who Used It',v:'Nearly every smartphone owner on Earth'},{l:'Where',v:'Everywhere — pockets, beds, bathrooms, commutes'},{l:'Skill Required',v:'Almost none — autocorrect does the precision work'},{l:'Body Posture',v:'Two thumbs, head bowed, shoulders hunched — the prayer pose of the 21st century'},{l:'Cultural Significance',v:'The onscreen keyboard completed the keyboard\'s journey from specialized tool to universal human interface. It preserved every skeuomorphic echo — QWERTY, the click, the key shape — while removing every physical component that created them.',full:true}],
        sensory:[{cls:'auditory',type:'Sound',desc:'Synthesized click — a speaker playing a recording of a key that doesn\'t exist'},{cls:'tactile',type:'Touch',desc:'Haptic vibration simulating key depression on a flat glass surface'},{cls:'visual',type:'Sight',desc:'QWERTY layout rendered as pixels, key "press" animations, pop-up letter preview'},{cls:'gestural',type:'Gesture',desc:'Two-thumb typing on glass — the ghost of a posture invented for a mechanical machine'}],
        gained:'A keyboard that appears only when needed and vanishes when it doesn\'t. Multilingual switching. Swipe typing. Emoji. The keyboard became software.',
        lost:'All genuine tactile feedback. The real click. The physical home row. The ability to type without looking. Speed — glass typing is roughly 40% slower than physical keyboards.',
        carried:'Everything. The layout. The click. The key shape. The muscle memory. 150 years of accumulated habit, preserved in light on glass.',
        footnote:'If you turn off haptic feedback and keyboard sounds on your phone, you\'ll notice how strange it feels — your fingers expect resistance and confirmation that simply isn\'t there.'}
    ]
  };

  // ============================================
  // SECONDARY SKEUOMORPHS — PREVIEW ONLY
  // ============================================
  const PREVIEWS = [
  {
    id:'shutter',
    number:'02',
    titleLines:['Shutter','Click'],
    accentLine:1,
    subtitle:'From dark room to bright screen',
    intro:'Your phone plays a fake shutter sound when you take a photo. It\'s mimicking the <strong>mirror slap</strong> of a single-lens reflex camera — a mechanical event caused by a mirror flipping out of the light path. Your phone has no mirror. No shutter. No film. But it still goes <em>click</em>.',
    echo:'A synthesized shutter sound, a simulated aperture animation, and the word "shoot" — all remnants of a mechanical process that hasn\'t existed in your camera for years.',
    lockLabel:'Negatives Not Yet Developed',
    lockMessage:'This chain is still in the darkroom. Six evolutionary links — from the <strong>camera obscura</strong> to the <strong>smartphone camera</strong> — are being developed and will be available in a future release.',
    previewLinks:[
      {name:'Camera Obscura',era:'Hand-Powered',year:'500 BC – 1800s'},
      {name:'The Daguerreotype',era:'Mechanical',year:'1839 – 1860s'},
      {name:'Bellows Plate Camera',era:'Mechanical',year:'1850s – 1930s'},
      {name:'The 35mm SLR',era:'Mechanical',year:'1936 – 2000s'},
      {name:'The Digital SLR',era:'Digital',year:'1999 – Present'},
      {name:'The Smartphone Camera',era:'Virtual',year:'2007 – Present'}
    ]
  },
  {
    id:'envelope',
    number:'03',
    titleLines:['The','Envelope'],
    accentLine:1,
    subtitle:'From wax seal to inbox icon',
    intro:'The envelope icon in your email app depicts a folded paper container with a triangular flap — an object you may never have actually mailed. You "open" messages, check your "inbox," and "attach" files with a paperclip icon. Every metaphor is borrowed from a <strong>postal system</strong> that predates the internet by centuries.',
    echo:'A sealed envelope icon, an "inbox" tray, a paperclip attachment symbol, and the word "mail" itself — all ghosts of a physical postal system.',
    lockLabel:'Return to Sender',
    lockMessage:'This chain is sealed and undelivered. Six evolutionary links — from <strong>clay tablet &amp; seal</strong> to <strong>email</strong> — are in transit and will arrive in a future release.',
    previewLinks:[
      {name:'Clay Tablet & Seal',era:'Hand-Powered',year:'3500 BC – 500 BC'},
      {name:'Wax-Sealed Letter',era:'Hand-Powered',year:'Middle Ages – 1800s'},
      {name:'The Paper Envelope',era:'Mechanical',year:'1840s – Present'},
      {name:'The Postcard',era:'Mechanical',year:'1869 – Present'},
      {name:'The Fax Machine',era:'Electric',year:'1964 – 2000s'},
      {name:'Email',era:'Virtual',year:'1971 – Present'}
    ]
  },
  {
    id:'hangup',
    number:'04',
    titleLines:['"Hanging','Up"'],
    accentLine:1,
    subtitle:'From hook to gesture',
    intro:'When you end a phone call, you tap a red icon of a <strong>handset resting on a cradle</strong>. Your phone has no handset. It has no cradle. The act of "hanging up" refers to early telephones that literally hung on the wall — you hung the earpiece on a hook to disconnect. The hook is gone. The wall mount is gone. The gesture remains.',
    echo:'A red handset icon, the phrase "hang up," and the decisive finality of ending a call — all echoes of a wall-mounted telephone with a physical hook switch.',
    lockLabel:'Line Disconnected',
    lockMessage:'This chain\'s line has been cut. Six evolutionary links — from the <strong>telegraph key</strong> to the <strong>smartphone end-call button</strong> — are awaiting reconnection in a future release.',
    previewLinks:[
      {name:'The Telegraph Key',era:'Electric',year:'1837 – 1960s'},
      {name:'Bell\'s Telephone',era:'Electric',year:'1876 – 1900s'},
      {name:'Candlestick Phone',era:'Electric',year:'1890s – 1930s'},
      {name:'Rotary Desk Phone',era:'Electric',year:'1930s – 1980s'},
      {name:'The Cordless Phone',era:'Digital',year:'1980s – 2010s'},
      {name:'Smartphone End-Call',era:'Virtual',year:'2007 – Present'}
    ]
  },
  {
    id:'cart',
    number:'05',
    titleLines:['Shopping','Cart'],
    accentLine:1,
    subtitle:'From wheelbarrow to checkout button',
    intro:'You "add to cart" on your phone. The icon is a wheeled wire basket — an object invented in <strong>1937</strong> for a grocery store in Oklahoma City. Your phone has no basket, no wheels, and no aisle. Yet the metaphor persists because the physical shopping cart solved a problem that digital commerce inherited: <em>how do you carry multiple items to a single point of purchase?</em>',
    echo:'A wire basket icon with wheels, the phrase "add to cart," a checkout counter, and the concept of browsing aisles — all inherited from a physical retail experience.',
    lockLabel:'Out of Stock',
    lockMessage:'This chain is temporarily out of stock. Six evolutionary links — from the <strong>market stall</strong> to the <strong>e-commerce cart icon</strong> — are on backorder and will ship in a future release.',
    previewLinks:[
      {name:'The Market Stall',era:'Hand-Powered',year:'3000 BC – Present'},
      {name:'The General Store',era:'Mechanical',year:'1700s – 1950s'},
      {name:'The Department Store',era:'Mechanical',year:'1850s – Present'},
      {name:'The Shopping Cart',era:'Mechanical',year:'1937 – Present'},
      {name:'Mail-Order Catalog',era:'Electric',year:'1872 – 2000s'},
      {name:'The E-Commerce Cart',era:'Virtual',year:'1995 – Present'}
    ]
  }
  ];

  // ============================================
  // STATE
  // ============================================
  let currentSku = 0;
  let currentLink = 0;
  let visitedLinks = {};
  let expandedRegistryEntry = null;

  // ============================================
  // THEME
  // ============================================
  const toggle = document.getElementById('themeToggle');
  toggle.addEventListener('click', switchTheme);
  toggle.addEventListener('keydown', e => { if(e.key==='Enter'||e.key===' '){ e.preventDefault(); switchTheme(); } });
  function switchTheme(){
    document.documentElement.classList.add('transitioning');
    const t = document.documentElement.getAttribute('data-theme');
    document.documentElement.setAttribute('data-theme', t==='dark'?'light':'dark');
    setTimeout(()=>document.documentElement.classList.remove('transitioning'),500);
  }

  // ============================================
  // DRAG SCROLL
  // ============================================
  const viewport = document.getElementById('viewport');
  const eraBar = document.getElementById('eraBar');
  let isDown=false, startX, scrollLeft;
  viewport.addEventListener('mousedown',e=>{if(e.target.closest('.sku-card'))return;isDown=true;startX=e.pageX-viewport.offsetLeft;scrollLeft=viewport.scrollLeft;});
  viewport.addEventListener('mouseleave',()=>isDown=false);
  viewport.addEventListener('mouseup',()=>isDown=false);
  viewport.addEventListener('mousemove',e=>{if(!isDown)return;e.preventDefault();viewport.scrollLeft=scrollLeft-(e.pageX-viewport.offsetLeft-startX)*1.5;});
  viewport.addEventListener('scroll',()=>{
    const r=viewport.scrollLeft/(viewport.scrollWidth-viewport.clientWidth);
    eraBar.scrollLeft=r*(document.getElementById('eraScroll').scrollWidth-eraBar.clientWidth);
  });

  // ============================================
  // OVERLAY MANAGEMENT
  // ============================================
  function openSkuOverlay(skuIdx){
    currentSku=skuIdx;
    if(skuIdx===0) renderSplash(); else renderPreview(skuIdx);
    const o=document.getElementById('overlay');
    o.style.display='flex';
    requestAnimationFrame(()=>o.classList.add('visible'));
    document.getElementById('scrollHint').style.opacity='0';
    updateNav('timeline');
  }
  function closeOverlay(e){
    if(e&&e.target!==e.currentTarget)return;
    const o=document.getElementById('overlay');
    o.classList.remove('visible');
    setTimeout(()=>o.style.display='none',350);
    document.getElementById('scrollHint').style.opacity='1';
    updateNav('timeline');
  }
  function openAboutOverlay(){
    closeAllQuiet();
    const o=document.getElementById('aboutOverlay');
    o.style.display='flex';
    requestAnimationFrame(()=>o.classList.add('visible'));
    o.querySelector('.overlay-panel').scrollTop=0;
    document.getElementById('scrollHint').style.opacity='0';
    updateNav('about');
  }
  function closeAboutOverlay(e){
    if(e&&e.target!==e.currentTarget)return;
    const o=document.getElementById('aboutOverlay');
    o.classList.remove('visible');
    setTimeout(()=>o.style.display='none',350);
    document.getElementById('scrollHint').style.opacity='1';
    updateNav('timeline');
  }
  function openRegistryOverlay(){
    closeAllQuiet();
    renderRegistry();
    const o=document.getElementById('registryOverlay');
    o.style.display='flex';
    requestAnimationFrame(()=>o.classList.add('visible'));
    o.querySelector('.overlay-panel').scrollTop=0;
    document.getElementById('scrollHint').style.opacity='0';
    updateNav('registry');
  }
  function closeRegistryOverlay(e){
    if(e&&e.target!==e.currentTarget)return;
    const o=document.getElementById('registryOverlay');
    o.classList.remove('visible');
    setTimeout(()=>o.style.display='none',350);
    document.getElementById('scrollHint').style.opacity='1';
    updateNav('timeline');
  }
  function closeAllOverlays(){
    ['overlay','aboutOverlay','registryOverlay'].forEach(id=>{
      const o=document.getElementById(id);
      o.classList.remove('visible');
      setTimeout(()=>o.style.display='none',350);
    });
    document.getElementById('scrollHint').style.opacity='1';
    updateNav('timeline');
  }
  function closeAllQuiet(){
    ['overlay','aboutOverlay','registryOverlay'].forEach(id=>{
      const o=document.getElementById(id);
      o.classList.remove('visible');
      o.style.display='none';
    });
  }
  document.addEventListener('keydown',e=>{if(e.key==='Escape'){closeOverlay();closeAboutOverlay();closeRegistryOverlay();}});
  function updateNav(active){
    document.getElementById('navTimeline').classList.toggle('active-nav',active==='timeline');
    document.getElementById('navRegistry').classList.toggle('active-nav',active==='registry');
  }

  // ============================================
  // RENDER PRIMARY SPLASH
  // ============================================
  function renderSplash(){
    const s=PRIMARY;
    const panel=document.getElementById('overlayPanel');
    let titleHtml=s.titleLines.map((l,i)=>{
      let cls='splash-display-line '+(i===0?'s88':i===1?'s96':'s88');
      if(i===s.accentLine)cls+=' accent';
      return '<span class="'+cls+'">'+l+'</span>';
    }).join('');

    let tocHtml=s.links.map((lnk,i)=>'<div class="toc-item" onclick="showLink('+i+')"><div class="toc-number">'+String(i+1).padStart(2,'0')+'</div><div class="toc-info"><div class="toc-name">'+lnk.name+'</div><div class="toc-meta-row"><span class="toc-era-tag">'+lnk.era+'</span><span class="toc-year">'+lnk.year+'</span></div></div><div class="toc-arrow">&rarr;</div></div>').join('');

    let statsHtml=s.stats.map(st=>'<div class="chain-stat-cell"><div class="chain-stat-big">'+st.big+'</div><div class="chain-stat-label">'+st.label+'</div></div>').join('');

    panel.innerHTML=`
      <div class="overlay-header">
        <div class="overlay-title-bar"><span class="overlay-sku-label">${s.number}</span><span class="overlay-sku-name">${s.titleLines.join(' ')}</span></div>
        <button class="close-btn" onclick="closeOverlay()">&times;</button>
      </div>
      <div class="view-splash active">
        <div class="splash-view">
          <div class="splash-era">Skeuomorph ${s.number} &mdash; ${s.links.length} Links</div>
          <div class="splash-display">${titleHtml}</div>
          <div class="splash-subtitle">${s.subtitle}</div>
          <hr class="splash-rule">
          <p class="splash-intro">${s.intro}</p>
          <div class="echo-callout"><div class="echo-callout-label">The Echo</div><div class="echo-callout-text">${s.echo}</div></div>
          <div class="toc-label">The Chain &mdash; ${s.links.length} Evolutionary Links</div>
          <div class="toc-list">${tocHtml}</div>
          <div class="chain-stats">${statsHtml}</div>
        </div>
      </div>`;
    panel.scrollTop=0;
  }

  // ============================================
  // RENDER PREVIEW (SECONDARY)
  // ============================================
  function renderPreview(skuIdx){
    const s=PREVIEWS[skuIdx-1];
    const panel=document.getElementById('overlayPanel');
    const lockSvg='<svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></svg>';

    let titleHtml=s.titleLines.map((l,i)=>{
      let cls='splash-display-line '+(i===0?'s88':'s96');
      if(i===s.accentLine)cls+=' accent';
      return '<span class="'+cls+'">'+l+'</span>';
    }).join('');

    let tocHtml=s.previewLinks.map((lnk,i)=>'<div class="toc-item locked"><div class="toc-number">'+String(i+1).padStart(2,'0')+'</div><div class="toc-info"><div class="toc-name">'+lnk.name+'</div><div class="toc-meta-row"><span class="toc-era-tag">'+lnk.era+'</span><span class="toc-year">'+lnk.year+'</span></div></div><div class="toc-lock-icon">'+lockSvg+'</div></div>').join('');

    panel.innerHTML=`
      <div class="overlay-header">
        <div class="overlay-title-bar"><span class="overlay-sku-label">${s.number}</span><span class="overlay-sku-name">${s.titleLines.join(' ')}</span></div>
        <button class="close-btn" onclick="closeOverlay()">&times;</button>
      </div>
      <div class="view-splash active">
        <div class="splash-view">
          <div class="splash-era">Skeuomorph ${s.number} &mdash; Preview</div>
          <div class="splash-display">${titleHtml}</div>
          <div class="splash-subtitle">${s.subtitle}</div>
          <hr class="splash-rule">
          <p class="splash-intro">${s.intro}</p>
          <div class="echo-callout"><div class="echo-callout-label">The Echo</div><div class="echo-callout-text">${s.echo}</div></div>
          <div class="preview-banner">
            <div class="preview-banner-icon">${lockSvg}</div>
            <div>
              <div class="preview-banner-text">${s.lockMessage}</div>
              <div class="preview-release">${s.lockLabel}</div>
            </div>
          </div>
          <div class="toc-label">The Chain &mdash; ${s.previewLinks.length} Evolutionary Links</div>
          <div class="toc-list">${tocHtml}</div>
        </div>
      </div>`;
    panel.scrollTop=0;
  }

  // ============================================
  // RENDER LINK VIEW (PRIMARY ONLY)
  // ============================================
  function showLink(idx){
    currentLink=idx;
    const s=PRIMARY;
    const lnk=s.links[idx];
    const panel=document.getElementById('overlayPanel');

    if(!visitedLinks[idx]){
      visitedLinks[idx]=true;
      showToast(s.number,lnk.name);
    }

    let tabsHtml=s.links.map((l,i)=>'<div class="chain-tab'+(i===idx?' active':'')+'" onclick="showLink('+i+')">'+String(i+1).padStart(2,'0')+' '+l.tabName.split(' ').pop()+'</div>').join('');

    let displayHtml=lnk.displayLines.map(d=>{
      let cls='link-display-line '+d.size;
      if(d.accent)cls+=' accent';
      return '<span class="'+cls+'">'+d.text+'</span>';
    }).join('');

    let metaHtml=lnk.meta.map(m=>'<div class="meta-row"><div class="meta-key">'+m.k+'</div><div class="meta-val">'+m.v+'</div></div>').join('');
    let numHtml=lnk.numbers.map(n=>'<div class="number-cell"><div class="number-big">'+n.big+'</div><div class="number-unit">'+n.unit+'</div></div>').join('');
    let ctxHtml=lnk.context.map(c=>'<div class="context-cell'+(c.full?' full-width':'')+'"><div class="context-label">'+c.l+'</div><div class="context-value">'+c.v+'</div></div>').join('');
    let sensHtml=lnk.sensory.map(s=>'<div class="sensory-row"><div class="s-dot '+s.cls+'"></div><div class="s-type">'+s.type+'</div><div class="s-desc">'+s.desc+'</div></div>').join('');

    let prevBtn=idx>0?'<button class="link-nav-btn" onclick="showLink('+(idx-1)+')">&larr; '+String(idx).padStart(2,'0')+' '+s.links[idx-1].tabName.split(' ').pop()+'</button>':'<span></span>';
    let nextBtn=idx<s.links.length-1?'<button class="link-nav-btn" onclick="showLink('+(idx+1)+')">'+String(idx+2).padStart(2,'0')+' '+s.links[idx+1].tabName.split(' ').pop()+' &rarr;</button>':'<span></span>';

    panel.innerHTML=`
      <div class="overlay-header">
        <div class="overlay-title-bar"><span class="overlay-sku-label">${s.number}</span><span class="overlay-sku-name">${s.titleLines.join(' ')}</span></div>
        <button class="close-btn" onclick="closeOverlay()">&times;</button>
      </div>
      <div class="view-link active">
        <div class="back-bar"><button class="back-btn" onclick="renderSplash()"><span>&larr;</span> Back to overview</button></div>
        <div class="chain-nav">${tabsHtml}</div>
        <div class="link-content">
          <div class="link-era-badge">${lnk.era} Era</div>
          <div class="link-display">${displayHtml}</div>
          <div class="link-year-big">${lnk.year}</div>
          <hr class="link-rule">
          <div class="period-quote"><div class="period-quote-mark">&ldquo;</div><div class="period-quote-text">${lnk.quote.text}</div><div class="period-quote-attr">${lnk.quote.attr}</div></div>
          <div class="link-two-col"><div><p class="link-body">${lnk.body}</p></div><div class="link-meta-col">${metaHtml}</div></div>
          <div class="section-label">By the Numbers</div>
          <div class="numbers-row">${numHtml}</div>
          <div class="section-label">Context &amp; Usage</div>
          <div class="context-grid">${ctxHtml}</div>
          <div class="sensory-section"><div class="section-label">Sensory Profile</div>${sensHtml}</div>
          <hr class="link-rule">
          <div class="section-label">Evolution from Previous Link</div>
          <div class="change-pair">
            <div class="change-box gained"><div class="change-label gained-label">What Was Gained</div><div class="change-text">${lnk.gained}</div></div>
            <div class="change-box lost"><div class="change-label lost-label">What Was Lost</div><div class="change-text">${lnk.lost}</div></div>
          </div>
          <div class="carried-section"><div class="carried-label">What Carried Forward</div><div class="carried-text">${lnk.carried}</div></div>
          <div class="overlay-footnote"><div class="fn-marker">*</div><div class="fn-text">${lnk.footnote}</div></div>
        </div>
        <div class="link-nav">${prevBtn}${nextBtn}</div>
      </div>`;
    panel.scrollTop=0;
  }

  // ============================================
  // TOAST
  // ============================================
  function showToast(skuNum,linkName){
    const c=document.getElementById('toastContainer');
    const t=document.createElement('div');
    t.className='echo-toast';
    t.innerHTML='<svg class="echo-toast-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><polyline points="8 12 11 15 16 9"/></svg><div><div class="echo-toast-text">Echo Collected</div><div class="echo-toast-sub">'+skuNum+' — '+linkName+'</div></div>';
    c.appendChild(t);
    setTimeout(()=>t.remove(),2600);
  }

  // ============================================
  // ECHO REGISTRY (PRIMARY CHAIN ONLY)
  // ============================================
  function renderRegistry(){
    const list=document.getElementById('registryList');
    const totalLinks=PRIMARY.links.length;
    const collected=Object.keys(visitedLinks).length;

    document.getElementById('registryCount').textContent=collected+' / '+totalLinks+' collected';
    document.getElementById('registryFill').style.width=(collected/totalLinks)*100+'%';
    document.getElementById('registryEchoCount').textContent=collected*4;

    const modesFound=collected>0?4:0;
    document.getElementById('registryModesCount').textContent=modesFound+' / 4';
    document.getElementById('registryYearSpan').textContent=collected>0?'5,000+':'\u2014';

    const checkSvg='<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"/></svg>';
    const lockSvg='<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></svg>';

    let html='<div class="section-label" style="margin-bottom:12px;">Skeuomorph 01 \u2014 The Onscreen Keyboard</div>';
    PRIMARY.links.forEach((lnk,i)=>{
      const ic=!!visitedLinks[i];
      const ie=expandedRegistryEntry===i&&ic;
      html+='<div class="registry-entry '+(ic?'collected':'locked')+' '+(ie?'expanded':'')+'" data-key="'+i+'">';
      html+='<div class="registry-entry-header" onclick="'+(ic?'toggleReg('+i+')':'')+'">';
      html+='<div class="registry-entry-number">'+String(i+1).padStart(2,'0')+'</div>';
      html+='<div class="registry-entry-info"><div class="registry-entry-name">'+lnk.name+'</div><div class="registry-entry-meta"><span class="registry-entry-era">'+lnk.era+'</span><span class="registry-entry-status">'+(ic?'Collected':'Undiscovered')+'</span></div></div>';
      html+='<div class="registry-entry-badge">'+(ic?checkSvg:lockSvg)+'</div></div>';
      if(ic){
        html+='<div class="registry-echoes"><div class="registry-echoes-inner">';
        lnk.sensory.forEach(sn=>{
          html+='<div class="registry-echo-row"><div class="registry-echo-dot '+sn.cls+'"></div><div class="registry-echo-type">'+sn.type+'</div><div class="registry-echo-desc">'+sn.desc+'</div></div>';
        });
        html+='<div class="registry-carried"><div class="registry-carried-label">What Carried Forward</div><div class="registry-carried-text">'+lnk.carried+'</div></div>';
        html+='</div></div>';
      } else {
        html+='<div class="registry-locked-hint"><svg width="10" height="10" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><circle cx="12" cy="12" r="10"/><line x1="12" y1="8" x2="12" y2="12"/><line x1="12" y1="16" x2="12.01" y2="16"/></svg>Visit this link to collect its echoes</div>';
      }
      html+='</div>';
    });
    list.innerHTML=html;
  }
  function toggleReg(key){
    expandedRegistryEntry=expandedRegistryEntry===key?null:key;
    renderRegistry();
  }

  // ============================================
  // INIT
  // ============================================
  let hintHidden=false;
  viewport.addEventListener('scroll',()=>{if(!hintHidden){document.getElementById('scrollHint').style.opacity='0';hintHidden=true;}});
  viewport.scrollLeft=viewport.scrollWidth;
  </script>
</body>
</html>